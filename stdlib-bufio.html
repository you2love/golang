<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>bufio 缓冲 I/O - Go 学习教程</title>
    <link rel="stylesheet" href="styles.css?v=1.4">
    </head>
<body>
    <div class="container">
        <aside class="sidebar">
        <!-- 导航栏将通过JavaScript动态加载 -->
    </aside>
                <div class="content">
            <a href="stdlib.html" class="back-link">← 返回 stdlib</a>
            <h2 id="bufio">bufio 缓冲 I/O</h2>

            <h3>缓冲读取</h3>
            <pre><code><span class="keyword">package</span> main

<span class="keyword">import</span> (
    <span class="string">"bufio"</span>
    <span class="string">"fmt"</span>
    <span class="string">"os"</span>
)

<span class="function">func</span> <span class="function">main</span>() {
    file, _ := os.<span class="function">Open</span>(<span class="string">"test.txt"</span>)
    <span class="keyword">defer</span> file.<span class="function">Close</span>()
    
    scanner := bufio.<span class="function">NewScanner</span>(file)
    
    <span class="comment">// 逐行读取</span>
    <span class="keyword">for</span> scanner.<span class="function">Scan</span>() {
        fmt.<span class="function">Println</span>(scanner.<span class="function">Text</span>())
    }
}</code></pre>

            <h3>缓冲写入</h3>
            <pre><code><span class="keyword">package</span> main

<span class="keyword">import</span> (
    <span class="string">"bufio"</span>
    <span class="string">"fmt"</span>
    <span class="string">"os"</span>
)

<span class="function">func</span> <span class="function">main</span>() {
    file, _ := os.<span class="function">Create</span>(<span class="string">"output.txt"</span>)
    <span class="keyword">defer</span> file.<span class="function">Close</span>()
    
    writer := bufio.<span class="function">NewWriter</span>(file)
    <span class="keyword">defer</span> writer.<span class="function">Flush</span>()
    
    <span class="keyword">for</span> i := <span class="number">0</span>; i < <span class="number">10</span>; i++ {
        fmt.<span class="function">Fprintln</span>(writer, <span class="string">"Line"</span>, i)
    }
}</code></pre>

            <h3>从标准输入读取</h3>
            <pre><code><span class="keyword">package</span> main

<span class="keyword">import</span> (
    <span class="string">"bufio"</span>
    <span class="string">"fmt"</span>
    <span class="string">"os"</span>
)

<span class="function">func</span> <span class="function">main</span>() {
    scanner := bufio.<span class="function">NewScanner</span>(os.Stdin)
    
    fmt.<span class="function">Print</span>(<span class="string">"Enter your name: "</span>)
    scanner.<span class="function">Scan</span>()
    name := scanner.<span class="function">Text</span>()
    
    fmt.<span class="function">Printf</span>(<span class="string">"Hello, %s!\n"</span>, name)
}</code></pre>

            <h3>读取分隔符</h3>
            <pre><code><span class="keyword">package</span> main

<span class="keyword">import</span> (
    <span class="string">"bufio"</span>
    <span class="string">"fmt"</span>
    <span class="string">"strings"</span>
)

<span class="function">func</span> <span class="function">main</span>() {
    reader := strings.<span class="function">NewReader</span>(<span class="string">"apple,banana,cherry"</span>)
    scanner := bufio.<span class="function">NewScanner</span>(reader)
    
    <span class="comment">// 设置分隔符</span>
    scanner.<span class="function">Split</span>(bufio.<span class="function">ScanWords</span>)
    
    <span class="keyword">for</span> scanner.<span class="function">Scan</span>() {
        fmt.<span class="function">Println</span>(scanner.<span class="function">Text</span>())
    }
}</code></pre>

            <h3>使用 bufio.Reader</h3>
            <pre><code><span class="keyword">package</span> main

<span class="keyword">import</span> (
    <span class="string">"bufio"</span>
    <span class="string">"fmt"</span>
    <span class="string">"os"</span>
)

<span class="function">func</span> <span class="function">main</span>() {
    file, _ := os.<span class="function">Open</span>(<span class="string">"test.txt"</span>)
    <span class="keyword">defer</span> file.<span class="function">Close</span>()
    
    reader := bufio.<span class="function">NewReader</span>(file)
    
    <span class="comment">// 读取到分隔符</span>
    line, _ := reader.<span class="function">ReadString</span>(<span class="string">'\n'</span>)
    fmt.<span class="function">Println</span>(<span class="string">"Line:"</span>, line)
    
    <span class="comment">// 读取字节</span>
    data := <span class="function">make</span>([]<span class="keyword">byte</span>, <span class="number">10</span>)
    n, _ := reader.<span class="function">Read</span>(data)
    fmt.<span class="function">Printf</span>(<span class="string">"Read %d bytes: %s\n"</span>, n, data)
}</code></pre>

            <h3>使用 bufio.Writer</h3>
            <pre><code><span class="keyword">package</span> main

<span class="keyword">import</span> (
    <span class="string">"bufio"</span>
    <span class="string">"os"</span>
)

<span class="function">func</span> <span class="function">main</span>() {
    file, _ := os.<span class="function">Create</span>(<span class="string">"output.txt"</span>)
    <span class="keyword">defer</span> file.<span class="function">Close</span>()
    
    writer := bufio.<span class="function">NewWriter</span>(file)
    
    <span class="comment">// 写入字节</span>
    writer.<span class="function">Write</span>([]<span class="keyword">byte</span>(<span class="string">"Hello"</span>))
    
    <span class="comment">// 写入字符串</span>
    writer.<span class="function">WriteString</span>(<span class="string">", World!"</span>)
    
    <span class="comment">// 刷新缓冲区</span>
    writer.<span class="function">Flush</span>()
}</code></pre>

            
        </div>
    </div>
<script src="code-collapse.js"></script>

</body>
    <script src="navigation.js"></script>
</html>