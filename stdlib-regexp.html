<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>regexp 正则表达式 - Go 学习教程</title>
    <link rel="stylesheet" href="styles.css?v=1.3">
    <script src="navigation.js"></script>
</head>
<body>
    <div class="container">
        <aside class="sidebar">
        <!-- 导航栏将通过JavaScript动态加载 -->
    </aside>
                <div class="content">
            <a href="stdlib.html" class="back-link">← 返回 stdlib</a>
            <h2 id="regexp">regexp 正则表达式</h2>
            
            <h3>基础匹配</h3>
            <pre><code><span class="keyword">package</span> main

<span class="keyword">import</span> (
    <span class="string">"fmt"</span>
    <span class="string">"regexp"</span>
)

<span class="function">func</span> <span class="function">main</span>() {
    <span class="comment">// 编译正则表达式</span>
    re := regexp.<span class="function">MustCompile</span>(<span class="string">`Hello`</span>)
    
    <span class="comment">// 匹配字符串</span>
    text := <span class="string">"Hello, World!"</span>
    matched := re.<span class="function">MatchString</span>(text)
    fmt.<span class="function">Println</span>(<span class="string">"Matched:"</span>, matched)
    
    <span class="comment">// 查找匹配</span>
    loc := re.<span class="function">FindStringIndex</span>(text)
    fmt.<span class="function">Println</span>(<span class="string">"Location:"</span>, loc)
}</code></pre>

            <h3>捕获组</h3>
            <pre><code><span class="keyword">package</span> main

<span class="keyword">import</span> (
    <span class="string">"fmt"</span>
    <span class="string">"regexp"</span>
)

<span class="function">func</span> <span class="function">main</span>() {
    <span class="comment">// 使用捕获组</span>
    re := regexp.<span class="function">MustCompile</span>(<span class="string">`(\w+)\s+(\w+)`</span>)
    
    text := <span class="string">"Hello World"</span>
    matches := re.<span class="function">FindStringSubmatch</span>(text)
    
    fmt.<span class="function">Println</span>(<span class="string">"Full match:"</span>, matches[<span class="number">0</span>])
    fmt.<span class="function">Println</span>(<span class="string">"Group 1:"</span>, matches[<span class="number">1</span>])
    fmt.<span class="function">Println</span>(<span class="string">"Group 2:"</span>, matches[<span class="number">2</span>])
}</code></pre>

            <h3>替换</h3>
            <pre><code><span class="keyword">package</span> main

<span class="keyword">import</span> (
    <span class="string">"fmt"</span>
    <span class="string">"regexp"</span>
)

<span class="function">func</span> <span class="function">main</span>() {
    <span class="comment">// 简单替换</span>
    re := regexp.<span class="function">MustCompile</span>(<span class="string">`Hello`</span>)
    result := re.<span class="function">ReplaceAllString</span>(<span class="string">"Hello World"</span>, <span class="string">"Hi"</span>)
    fmt.<span class="function">Println</span>(result)
    
    <span class="comment">// 使用捕获组替换</span>
    re2 := regexp.<span class="function">MustCompile</span>(<span class="string">`(\w+)\s+(\w+)`</span>)
    result2 := re2.<span class="function">ReplaceAllString</span>(<span class="string">"Hello World"</span>, <span class="string">"$2 $1"</span>)
    fmt.<span class="function">Println</span>(result2)
    
    <span class="comment">// 使用函数替换</span>
    result3 := re2.<span class="function">ReplaceAllStringFunc</span>(<span class="string">"Hello World"</span>, <span class="keyword">func</span>(s <span class="keyword">string</span>) <span class="keyword">string</span> {
        <span class="keyword">return</span> <span class="string">"REPLACED"</span>
    })
    fmt.<span class="Function">Println</span>(result3)
}</code></pre>

            <h3>查找所有匹配</h3>
            <pre><code><span class="keyword">package</span> main

<span class="keyword">import</span> (
    <span class="string">"fmt"</span>
    <span class="string">"regexp"</span>
)

<span class="function">func</span> <span class="function">main</span>() {
    <span class="comment">// 查找所有匹配</span>
    re := regexp.<span class="function">MustCompile</span>(<span class="string">`\d+`</span>)
    text := <span class="string">"I have 2 apples and 3 oranges"</span>
    
    matches := re.<span class="function">FindAllString</span>(text, -<span class="number">1</span>)
    fmt.<span class="function">Println</span>(<span class="string">"All matches:"</span>, matches)
    
    <span class="comment">// 查找所有匹配及其位置</span>
    matchesWithPos := re.<span class="function">FindAllStringIndex</span>(text, -<span class="number">1</span>)
    fmt.<span class="function">Println</span>(<span class="string">"Matches with positions:"</span>, matchesWithPos)
    
    <span class="comment">// 查找所有子匹配</span>
    re2 := regexp.<span class="function">MustCompile</span>(<span class="string">`(\w+)\s+(\w+)`</span>)
    submatches := re2.<span class="function">FindAllStringSubmatch</span>(text, -<span class="number">1</span>)
    fmt.<span class="function">Println</span>(<span class="string">"Submatches:"</span>, submatches)
}</code></pre>

            <h3>常用正则表达式</h3>
            <pre><code><span class="keyword">package</span> main

<span class="keyword">import</span> (
    <span class="string">"fmt"</span>
    <span class="string">"regexp"</span>
)

<span class="function">func</span> <span class="function">main</span>() {
    <span class="comment">// 验证邮箱</span>
    emailRe := regexp.<span class="function">MustCompile</span>(<span class="string">`^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$`</span>)
    fmt.<span class="function">Println</span>(<span class="string">"Valid email:"</span>, emailRe.<span class="function">MatchString</span>(<span class="string">"user@example.com"</span>))
    
    <span class="comment">// 验证 URL</span>
    urlRe := regexp.<span class="function">MustCompile</span>(<span class="string">`^https?://[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}`</span>)
    fmt.<span class="function">Println</span>(<span class="string">"Valid URL:"</span>, urlRe.<span class="function">MatchString</span>(<span class="string">"https://example.com"</span>))
    
    <span class="comment">// 验证手机号（中国）</span>
    phoneRe := regexp.<span class="function">MustCompile</span>(<span class="string">`^1[3-9]\d{9}$`</span>)
    fmt.<span class="function">Println</span>(<span class="string">"Valid phone:"</span>, phoneRe.<span class="function">MatchString</span>(<span class="string">"13800138000"</span>))
    
    <span class="comment">// 提取 HTML 标签内容</span>
    htmlRe := regexp.<span class="function">MustCompile</span>(<span class="string">`<[^>]+>([^<]+)</[^>]+>`</span>)
    html := <span class="string">"<p>Hello</p><div>World
        </div>
    </div>
</body>
</html>