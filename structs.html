<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç»“æ„ä½“ - Go å­¦ä¹ æ•™ç¨‹</title>
    <link rel="stylesheet" href="styles.css?v=1.4">
    <script src="scroll.js"></script>
    </head>
<body>
    <div class="container">
        <aside class="sidebar">
        <!-- å¯¼èˆªæ å°†é€šè¿‡JavaScriptåŠ¨æ€åŠ è½½ -->
    </aside>
        <div class="content">
            <a href="index.html" class="back-link">â† è¿”å›é¦–é¡µ</a>
            <h1>ç»“æ„ä½“</h1>
            <p class="intro">ç»“æ„ä½“æ˜¯ Go è¯­è¨€ä¸­ç»„åˆæ•°æ®ç±»å‹ï¼Œç”¨äºå°è£…ä¸åŒç±»å‹çš„å­—æ®µï¼Œç±»ä¼¼äºå…¶ä»–è¯­è¨€çš„ç±»æ¦‚å¿µã€‚</p>

            <div class="feature-grid">
                <div class="feature-card">
                    <div class="icon">ğŸ—ï¸</div>
                    <h4>è‡ªå®šä¹‰ç±»å‹</h4>
                    <p>ç»„åˆå¤šä¸ªå­—æ®µåˆ›å»ºæ–°ç±»å‹</p>
                </div>
                <div class="feature-card">
                    <div class="icon">ğŸ¯</div>
                    <h4>æ–¹æ³•ç»‘å®š</h4>
                    <p>ä¸ºç»“æ„ä½“å®šä¹‰è¡Œä¸º</p>
                </div>
                <div class="feature-card">
                    <div class="icon">ğŸ”—</div>
                    <h4>åµŒå…¥</h4>
                    <p>ç»“æ„ä½“åµŒå…¥å®ç°ç»„åˆ</p>
                </div>
                <div class="feature-card">
                    <div class="icon">ğŸ·ï¸</div>
                    <h4>æ ‡ç­¾</h4>
                    <p>å…ƒæ•°æ®ç”¨äºåºåˆ—åŒ–</p>
                </div>
            </div>

            <h2 id="struct">å®šä¹‰ç»“æ„ä½“</h2>
            <pre><code><span class="keyword">package</span> main

<span class="keyword">import</span> <span class="string">"fmt"</span>

<span class="comment">// å®šä¹‰ç»“æ„ä½“</span>
<span class="keyword">type</span> Person <span class="keyword">struct</span> {
    Name    <span class="keyword">string</span>
    Age     <span class="keyword">int</span>
    Email   <span class="keyword">string</span>
}

<span class="function">func</span> <span class="function">main</span>() {
    <span class="comment">// åˆ›å»ºç»“æ„ä½“å®ä¾‹</span>
    <span class="comment">// æ–¹å¼1ï¼šæŒ‰å­—æ®µé¡ºåº</span>
    p1 := Person{<span class="string">"å¼ ä¸‰"</span>, <span class="number">25</span>, <span class="string">"zhangsan@example.com"</span>}

    <span class="comment">// æ–¹å¼2ï¼šæŒ‰å­—æ®µåï¼ˆæ¨èï¼‰</span>
    p2 := Person{
        Name:  <span class="string">"æå››"</span>,
        Age:   <span class="number">30</span>,
        Email: <span class="string">"lisi@example.com"</span>,
    }

    <span class="comment">// æ–¹å¼3ï¼šä½¿ç”¨ new å…³é”®å­—</span>
    p3 := <span class="keyword">new</span>(Person)
    p3.Name = <span class="string">"ç‹äº”"</span>
    p3.Age = <span class="number">28</span>
    p3.Email = <span class="string">"wangwu@example.com"</span>

    fmt.<span class="function">Println</span>(<span class="string">"p1:"</span>, p1)
    fmt.<span class="function">Println</span>(<span class="string">"p2:"</span>, p2)
    fmt.<span class="function">Println</span>(<span class="string">"p3:"</span>, p3)
}</code></pre>

            <h2 id="fields">è®¿é—®ç»“æ„ä½“å­—æ®µ</h2>
            <pre><code><span class="keyword">package</span> main

<span class="keyword">import</span> <span class="string">"fmt"</span>

<span class="keyword">type</span> Person <span class="keyword">struct</span> {
    Name  <span class="keyword">string</span>
    Age   <span class="keyword">int</span>
    Email <span class="keyword">string</span>
}

<span class="function">func</span> <span class="function">main</span>() {
    p := Person{Name: <span class="string">"å¼ ä¸‰"</span>, Age: <span class="number">25</span>}

    <span class="comment">// è®¿é—®å­—æ®µ</span>
    fmt.<span class="function">Println</span>(<span class="string">"å§“å:"</span>, p.Name)
    fmt.<span class="function">Println</span>(<span class="string">"å¹´é¾„:"</span>, p.Age)

    <span class="comment">// ä¿®æ”¹å­—æ®µ</span>
    p.Age = <span class="number">26</span>
    fmt.<span class="function">Println</span>(<span class="string">"æ–°å¹´é¾„:"</span>, p.Age)

    <span class="comment">// ä½¿ç”¨æŒ‡é’ˆ</span>
    ptr := &p
    ptr.Name = <span class="string">"æå››"</span>
    fmt.<span class="function">Println</span>(<span class="string">"æ–°å§“å:"</span>, p.Name)
}</code></pre>

            <h2 id="nested">ç»“æ„ä½“åµŒå¥—</h2>
            <pre><code><span class="keyword">package</span> main

<span class="keyword">import</span> <span class="string">"fmt"</span>

<span class="comment">// åœ°å€ç»“æ„ä½“</span>
<span class="keyword">type</span> Address <span class="keyword">struct</span> {
    City    <span class="keyword">string</span>
    Street  <span class="keyword">string</span>
    ZipCode <span class="keyword">string</span>
}

<span class="comment">// ç”¨æˆ·ç»“æ„ä½“</span>
<span class="keyword">type</span> User <span class="keyword">struct</span> {
    Name    <span class="keyword">string</span>
    Age     <span class="keyword">int</span>
    Address <span class="comment">// åµŒå¥—ç»“æ„ä½“</span>
}

<span class="function">func</span> <span class="function">main</span>() {
    user := User{
        Name: <span class="string">"å¼ ä¸‰"</span>,
        Age:  <span class="number">25</span>,
        Address: Address{
            City:    <span class="string">"åŒ—äº¬"</span>,
            Street:  <span class="string">"é•¿å®‰è¡—"</span>,
            ZipCode: <span class="string">"100000"</span>,
        },
    }

    fmt.<span class="function">Println</span>(<span class="string">"ç”¨æˆ·:"</span>, user.Name)
    fmt.<span class="function">Println</span>(<span class="string">"åŸå¸‚:"</span>, user.Address.City)
    fmt.<span class="function">Println</span>(<span class="string">"è¡—é“:"</span>, user.Address.Street)
}</code></pre>

            <h2 id="anonymous">åŒ¿ååµŒå¥—ï¼ˆæå‡å­—æ®µï¼‰</h2>
            <pre><code><span class="keyword">package</span> main

<span class="keyword">import</span> <span class="string">"fmt"</span>

<span class="keyword">type</span> Point <span class="keyword">struct</span> {
    X, Y <span class="keyword">int</span>
}

<span class="keyword">type</span> Circle <span class="keyword">struct</span> {
    Point   <span class="comment">// åŒ¿ååµŒå¥—</span>
    Radius <span class="keyword">int</span>
}

<span class="function">func</span> <span class="function">main</span>() {
    c := Circle{
        Point:  Point{X: <span class="number">10</span>, Y: <span class="number">20</span>},
        Radius: <span class="number">5</span>,
    }

    <span class="comment">// å¯ä»¥ç›´æ¥è®¿é—®æå‡çš„å­—æ®µ</span>
    fmt.<span class="function">Println</span>(<span class="string">"X:"</span>, c.X)
    fmt.<span class="function">Println</span>(<span class="string">"Y:"</span>, c.Y)
    fmt.<span class="function">Println</span>(<span class="string">"åŠå¾„:"</span>, c.Radius)

    <span class="comment">// ä¹Ÿå¯ä»¥é€šè¿‡åµŒå¥—ç±»å‹è®¿é—®</span>
    fmt.<span class="function">Println</span>(<span class="string">"Point.X:"</span>, c.Point.X)
}</code></pre>

            <h2 id="methods">ç»“æ„ä½“æ–¹æ³•</h2>
            <pre><code><span class="keyword">package</span> main

<span class="keyword">import</span> <span class="string">"fmt"</span>

<span class="keyword">type</span> Rectangle <span class="keyword">struct</span> {
    Width  <span class="keyword">float64</span>
    Height <span class="keyword">float64</span>
}

<span class="comment">// å€¼æ¥æ”¶è€…æ–¹æ³•</span>
<span class="function">func</span> (r Rectangle) <span class="function">Area</span>() <span class="keyword">float64</span> {
    <span class="keyword">return</span> r.Width * r.Height
}

<span class="comment">// å€¼æ¥æ”¶è€…æ–¹æ³•ï¼ˆä¸ä¿®æ”¹åŸç»“æ„ä½“ï¼‰</span>
<span class="function">func</span> (r Rectangle) <span class="function">Perimeter</span>() <span class="keyword">float64</span> {
    <span class="keyword">return</span> <span class="number">2</span> * (r.Width + r.Height)
}

<span class="comment">// æŒ‡é’ˆæ¥æ”¶è€…æ–¹æ³•ï¼ˆå¯ä»¥ä¿®æ”¹åŸç»“æ„ä½“ï¼‰</span>
<span class="function">func</span> (r *Rectangle) <span class="function">Scale</span>(factor <span class="keyword">float64</span>) {
    r.Width *= factor
    r.Height *= factor
}

<span class="function">func</span> <span class="function">main</span>() {
    rect := Rectangle{Width: <span class="number">3</span>, Height: <span class="number">4</span>}

    fmt.<span class="function">Printf</span>(<span class="string">"é¢ç§¯: %.2f\n"</span>, rect.<span class="function">Area</span>())
    fmt.<span class="function">Printf</span>(<span class="string">"å‘¨é•¿: %.2f\n"</span>, rect.<span class="function">Perimeter</span>())

    rect.<span class="function">Scale</span>(<span class="number">2</span>)
    fmt.<span class="function">Printf</span>(<span class="string">"ç¼©æ”¾åé¢ç§¯: %.2f\n"</span>, rect.<span class="function">Area</span>())
}</code></pre>

            <h2 id="interface">æ¥å£</h2>
            <pre><code><span class="keyword">package</span> main

<span class="keyword">import</span> <span class="string">"fmt"</span>

<span class="comment">// å®šä¹‰æ¥å£</span>
<span class="keyword">type</span> Shape <span class="keyword">interface</span> {
    <span class="function">Area</span>() <span class="keyword">float64</span>
    <span class="function">Perimeter</span>() <span class="keyword">float64</span>
}

<span class="keyword">type</span> Rectangle <span class="keyword">struct</span> {
    Width, Height <span class="keyword">float64</span>
}

<span class="function">func</span> (r Rectangle) <span class="function">Area</span>() <span class="keyword">float64</span> {
    <span class="keyword">return</span> r.Width * r.Height
}

<span class="function">func</span> (r Rectangle) <span class="function">Perimeter</span>() <span class="keyword">float64</span> {
    <span class="keyword">return</span> <span class="number">2</span> * (r.Width + r.Height)
}

<span class="keyword">type</span> Circle <span class="keyword">struct</span> {
    Radius <span class="keyword">float64</span>
}

<span class="function">func</span> (c Circle) <span class="function">Area</span>() <span class="keyword">float64</span> {
    <span class="keyword">return</span> <span class="number">3.14159</span> * c.Radius * c.Radius
}

<span class="function">func</span> (c Circle) <span class="function">Perimeter</span>() <span class="keyword">float64</span> {
    <span class="keyword">return</span> <span class="number">2</span> * <span class="number">3.14159</span> * c.Radius
}

<span class="function">func</span> <span class="function">printShapeInfo</span>(s Shape) {
    fmt.<span class="function">Printf</span>(<span class="string">"é¢ç§¯: %.2f, å‘¨é•¿: %.2f\n"</span>, s.<span class="function">Area</span>(), s.<span class="function">Perimeter</span>())
}

<span class="function">func</span> <span class="function">main</span>() {
    rect := Rectangle{Width: <span class="number">3</span>, Height: <span class="number">4</span>}
    circle := Circle{Radius: <span class="number">5</span>}

    <span class="function">printShapeInfo</span>(rect)
    <span class="function">printShapeInfo</span>(circle)
}</code></pre>

            <h2 id="empty">ç©ºæ¥å£</h2>
            <pre><code><span class="keyword">package</span> main

<span class="keyword">import</span> <span class="string">"fmt"</span>

<span class="comment">// ç©ºæ¥å£å¯ä»¥æ¥å—ä»»ä½•ç±»å‹</span>
<span class="function">func</span> <span class="function">printAnything</span>(value <span class="keyword">interface</span>{}) {
    fmt.<span class="function">Println</span>(<span class="string">"å€¼:"</span>, value)

    <span class="comment">// ç±»å‹æ–­è¨€</span>
    <span class="keyword">if</span> str, ok := value.<span class="keyword">(</span><span class="keyword">string</span><span class="keyword">)</span>; ok {
        fmt.<span class="function">Println</span>(<span class="string">"æ˜¯å­—ç¬¦ä¸²ï¼Œé•¿åº¦:"</span>, <span class="function">len</span>(str))
    } <span class="keyword">else if</span> num, ok := value.<span class="keyword">(</span><span class="keyword">int</span><span class="keyword">)</span>; ok {
        fmt.<span class="function">Println</span>(<span class="string">"æ˜¯æ•´æ•°ï¼Œå€¼:"</span>, num)
    }
}

<span class="comment">// ç±»å‹ switch</span>
<span class="function">func</span> <span class="function">checkType</span>(value <span class="keyword">interface</span>{}) {
    <span class="keyword">switch</span> v := value.<span class="keyword">(</span><span class="keyword">type</span><span class="keyword">)</span> {
    <span class="keyword">case</span> <span class="keyword">string</span>:
        fmt.<span class="function">Println</span>(<span class="string">"å­—ç¬¦ä¸²:"</span>, v)
    <span class="keyword">case</span> <span class="keyword">int</span>:
        fmt.<span class="function">Println</span>(<span class="string">"æ•´æ•°:"</span>, v)
    <span class="keyword">case</span> <span class="keyword">bool</span>:
        fmt.<span class="function">Println</span>(<span class="string">"å¸ƒå°”å€¼:"</span>, v)
    <span class="keyword">default</span>:
        fmt.<span class="function">Println</span>(<span class="string">"æœªçŸ¥ç±»å‹"</span>)
    }
}

<span class="function">func</span> <span class="function">main</span>() {
    <span class="function">printAnything</span>(<span class="string">"Hello"</span>)
    <span class="function">printAnything</span>(<span class="number">42</span>)
    <span class="function">printAnything</span>(<span class="number">3.14</span>)

    <span class="function">checkType</span>(<span class="string">"Go"</span>)
    <span class="function">checkType</span>(<span class="number">100</span>)
    <span class="function">checkType</span>(<span class="keyword">true</span>)
}</code></pre>

            <div class="note-box">
                <h3>Interface çš„å†…éƒ¨å®ç°åŸç†</h3>
                <p><strong>1. Interface çš„å†…éƒ¨ç»“æ„ï¼š</strong></p>
                <p>Go çš„æ¥å£åœ¨è¿è¡Œæ—¶ä½¿ç”¨ <code>eface</code>ï¼ˆç©ºæ¥å£ï¼‰å’Œ <code>iface</code>ï¼ˆéç©ºæ¥å£ï¼‰ä¸¤ç§ç»“æ„ï¼š</p>
                <pre><code><span class="comment">// ç©ºæ¥å£ (interface{}) çš„å†…éƒ¨ç»“æ„</span>
<span class="keyword">type</span> eface <span class="keyword">struct</span> {
    _type *_type   <span class="comment">// æŒ‡å‘ç±»å‹ä¿¡æ¯çš„æŒ‡é’ˆ</span>
    data  unsafe.Pointer  <span class="comment">// æŒ‡å‘æ•°æ®çš„æŒ‡é’ˆ</span>
}

<span class="comment">// éç©ºæ¥å£çš„å†…éƒ¨ç»“æ„</span>
<span class="keyword">type</span> iface <span class="keyword">struct</span> {
    tab  *itab    <span class="comment">// æŒ‡å‘æ–¹æ³•è¡¨çš„æŒ‡é’ˆ</span>
    data unsafe.Pointer  <span class="comment">// æŒ‡å‘æ•°æ®çš„æŒ‡é’ˆ</span>
}

<span class="comment">// æ–¹æ³•è¡¨ç»“æ„</span>
<span class="keyword">type</span> itab <span class="keyword">struct</span> {
    inter *interfacetype  <span class="comment">// æ¥å£ç±»å‹ä¿¡æ¯</span>
    _type *_type          <span class="comment">// å…·ä½“ç±»å‹ä¿¡æ¯</span>
    hash  <span class="keyword">uint32</span>           <span class="comment">// ç±»å‹å“ˆå¸Œå€¼</span>
    _     [<span class="number">4</span>]<span class="keyword">byte</span>         <span class="comment">// å¡«å……</span>
    fun   [<span class="number">1</span>]<span class="keyword">uintptr</span>      <span class="comment">// æ–¹æ³•æŒ‡é’ˆæ•°ç»„ï¼ˆå¯å˜é•¿ï¼‰</span>
}</code></pre>

                <p><strong>2. ç±»å‹ä¿¡æ¯ç»“æ„ï¼š</strong></p>
                <pre><code><span class="keyword">type</span> _type <span class="keyword">struct</span> {
    size       <span class="keyword">uintptr</span>  <span class="comment">// ç±»å‹å¤§å°</span>
    ptrdata    <span class="keyword">uintptr</span>  <span class="comment">// åŒ…å«æŒ‡é’ˆçš„å­—èŠ‚æ•°</span>
    hash       <span class="keyword">uint32</span>   <span class="comment">// ç±»å‹å“ˆå¸Œå€¼</span>
    tflag      tflag     <span class="comment">// ç±»å‹æ ‡å¿—</span>
    align      <span class="keyword">uint8</span>    <span class="comment">// å¯¹é½</span>
    fieldalign <span class="keyword">uint8</span>    <span class="comment">// å­—æ®µå¯¹é½</span>
    kind       <span class="keyword">uint8</span>    <span class="comment">// ç±»å‹ç§ç±»</span>
    alg        *typeAlg  <span class="comment">// ç®—æ³•è¡¨ï¼ˆhashã€equalï¼‰</span>
    gcdata     *<span class="keyword">byte</span>    <span class="comment">// GC æ•°æ®</span>
    str        nameOff   <span class="comment">// ç±»å‹åç§°</span>
    ptrToThis  typeOff   <span class="comment">// æŒ‡å‘æ­¤ç±»å‹çš„æŒ‡é’ˆç±»å‹</span>
}</code></pre>

                <p><strong>3. æ¥å£èµ‹å€¼è¿‡ç¨‹ï¼š</strong></p>
                <pre><code><span class="keyword">package</span> main

<span class="keyword">import</span> <span class="string">"fmt"</span>

<span class="keyword">type</span> Shape <span class="keyword">interface</span> {
    <span class="function">Area</span>() <span class="keyword">float64</span>
}

<span class="keyword">type</span> Rectangle <span class="keyword">struct</span> {
    Width, Height <span class="keyword">float64</span>
}

<span class="function">func</span> (r Rectangle) <span class="function">Area</span>() <span class="keyword">float64</span> {
    <span class="keyword">return</span> r.Width * r.Height
}

<span class="function">func</span> <span class="function">main</span>() {
    rect := Rectangle{Width: <span class="number">3</span>, Height: <span class="number">4</span>}
    
    <span class="comment">// èµ‹å€¼ç»™æ¥å£æ—¶çš„å†…éƒ¨è¿‡ç¨‹ï¼š</span>
    <span class="comment">// 1. åˆ›å»º itab ç»“æ„</span>
    <span class="comment">// 2. å¡«å……æ¥å£ç±»å‹ä¿¡æ¯ (inter = Shape)</span>
    <span class="comment">// 3. å¡«å……å…·ä½“ç±»å‹ä¿¡æ¯ (_type = Rectangle)</span>
    <span class="comment">// 4. å¡«å……æ–¹æ³•æŒ‡é’ˆ (fun[0] = Rectangle.Area)</span>
    <span class="comment">// 5. è®¾ç½® data æŒ‡å‘ rect</span>
    
    <span class="keyword">var</span> s Shape = rect
    
    <span class="comment">// è°ƒç”¨æ–¹æ³•æ—¶çš„å†…éƒ¨è¿‡ç¨‹ï¼š</span>
    <span class="comment">// 1. é€šè¿‡ s.tab.fun[0] æ‰¾åˆ° Rectangle.Area</span>
    <span class="comment">// 2. å°† s.data ä½œä¸ºæ¥æ”¶è€…ä¼ é€’</span>
    fmt.<span class="function">Println</span>(<span class="string">"é¢ç§¯:"</span>, s.<span class="function">Area</span>())
}</code></pre>

                <p><strong>4. ç±»å‹æ–­è¨€åŸç†ï¼š</strong></p>
                <pre><code><span class="keyword">package</span> main

<span class="keyword">import</span> <span class="string">"fmt"</span>

<span class="keyword">type</span> Writer <span class="keyword">interface</span> {
    <span class="function">Write</span>([]<span class="keyword">byte</span>) (<span class="keyword">int</span>, <span class="keyword">error</span>)
}

<span class="keyword">type</span> File <span class="keyword">struct</span> {
    name <span class="keyword">string</span>
}

<span class="function">func</span> (f *File) <span class="function">Write</span>(data []<span class="keyword">byte</span>) (<span class="keyword">int</span>, <span class="keyword">error</span>) {
    fmt.<span class="function">Println</span>(<span class="string">"å†™å…¥æ–‡ä»¶:"</span>, f.name)
    <span class="keyword">return</span> <span class="function">len</span>(data), <span class="keyword">nil</span>
}

<span class="function">func</span> <span class="function">main</span>() {
    <span class="keyword">var</span> w Writer = &File{<span class="string">"test.txt"</span>}
    
    <span class="comment">// ç±»å‹æ–­è¨€çš„å†…éƒ¨è¿‡ç¨‹ï¼š</span>
    <span class="comment">// 1. æ£€æŸ¥ w.tab._type æ˜¯å¦ç­‰äº *File</span>
    <span class="comment">// 2. å¦‚æœç›¸ç­‰ï¼Œè¿”å› w.data</span>
    <span class="comment">// 3. å¦‚æœä¸ç›¸ç­‰ï¼Œæ£€æŸ¥ *File æ˜¯å¦å®ç°äº† Writer</span>
    
    <span class="keyword">if</span> file, ok := w.(*File); ok {
        fmt.<span class="function">Println</span>(<span class="string">"ç±»å‹æ–­è¨€æˆåŠŸ:"</span>, file.name)
    }
}</code></pre>

                <p><strong>5. æ¥å£æ¯”è¾ƒï¼š</strong></p>
                <pre><code><span class="keyword">package</span> main

<span class="keyword">import</span> <span class="string">"fmt"</span>

<span class="function">func</span> <span class="function">main</span>() {
    <span class="comment">// ç©ºæ¥å£æ¯”è¾ƒ</span>
    <span class="keyword">var</span> a, b <span class="keyword">interface</span>{} = <span class="number">1</span>, <span class="number">1</span>
    fmt.<span class="function">Println</span>(<span class="string">"a == b:"</span>, a == b)  <span class="comment">// true</span>

    <span class="comment">// éç©ºæ¥å£æ¯”è¾ƒ</span>
    <span class="keyword">type</span> I <span class="keyword">interface</span> {
        <span class="function">M</span>()
    }
    <span class="keyword">type</span> T <span class="keyword">struct</span> { x <span class="keyword">int</span> }
    <span class="function">func</span> (t T) <span class="function">M</span>() {}
    
    <span class="keyword">var</span> i1, i2 I = T{<span class="number">1</span>}, T{<span class="number">1</span>}
    fmt.<span class="function">Println</span>(<span class="string">"i1 == i2:"</span>, i1 == i2)  <span class="comment">// true</span>
    
    <span class="comment">// æ¯”è¾ƒåŸç†ï¼š</span>
    <span class="comment">// 1. æ¯”è¾ƒ tab æŒ‡é’ˆï¼ˆç±»å‹æ˜¯å¦ç›¸åŒï¼‰</span>
    <span class="comment">// 2. æ¯”è¾ƒ data æŒ‡å‘çš„å€¼</span>
}</code></pre>

                <p><strong>6. åŠ¨æ€åˆ†æ´¾ï¼ˆDynamic Dispatchï¼‰ï¼š</strong></p>
                <pre><code><span class="keyword">package</span> main

<span class="keyword">import</span> <span class="string">"fmt"</span>

<span class="keyword">type</span> Writer <span class="keyword">interface</span> {
    <span class="function">Write</span>([]<span class="keyword">byte</span>) (<span class="keyword">int</span>, <span class="keyword">error</span>)
}

<span class="keyword">type</span> Buffer <span class="keyword">struct</span> {
    data []<span class="keyword">byte</span>
}

<span class="function">func</span> (b *Buffer) <span class="function">Write</span>(p []<span class="keyword">byte</span>) (<span class="keyword">int</span>, <span class="keyword">error</span>) {
    b.data = <span class="function">append</span>(b.data, p...)
    <span class="keyword">return</span> <span class="function">len</span>(p), <span class="keyword">nil</span>
}

<span class="keyword">type</span> File <span class="keyword">struct</span> {
    name <span class="keyword">string</span>
}

<span class="function">func</span> (f *File) <span class="function">Write</span>(p []<span class="keyword">byte</span>) (<span class="keyword">int</span>, <span class="keyword">error</span>) {
    fmt.<span class="function">Printf</span>(<span class="string">"å†™å…¥åˆ°æ–‡ä»¶ %s: %s\n"</span>, f.name, p)
    <span class="keyword">return</span> <span class="function">len</span>(p), <span class="keyword">nil</span>
}

<span class="comment">// åŠ¨æ€åˆ†æ´¾ï¼šè¿è¡Œæ—¶å†³å®šè°ƒç”¨å“ªä¸ªæ–¹æ³•</span>
<span class="function">func</span> <span class="function">writeData</span>(w Writer, data []<span class="keyword">byte</span>) {
    w.<span class="function">Write</span>(data)
}

<span class="function">func</span> <span class="function">main</span>() {
    <span class="keyword">var</span> w Writer
    
    <span class="comment">// åŠ¨æ€é€‰æ‹©å®ç°</span>
    w = &Buffer{}
    w.<span class="function">Write</span>([]<span class="keyword">byte</span>(<span class="string">"hello"</span>))
    
    w = &File{<span class="string">"test.txt"</span>}
    w.<span class="function">Write</span>([]<span class="keyword">byte</span>(<span class="string">"world"</span>))
}</code></pre>

                <p><strong>7. æ¥å£è½¬æ¢ï¼ˆInterface Conversionï¼‰ï¼š</strong></p>
                <pre><code><span class="keyword">package</span> main

<span class="keyword">import</span> <span class="string">"fmt"</span>

<span class="keyword">type</span> Reader <span class="keyword">interface</span> {
    <span class="function">Read</span>() <span class="keyword">string</span>
}

<span class="keyword">type</span> Writer <span class="keyword">interface</span> {
    <span class="function">Write</span>(<span class="keyword">string</span>)
}

<span class="keyword">type</span> ReadWriter <span class="keyword">interface</span> {
    Reader
    Writer
}

<span class="keyword">type</span> MyStruct <span class="keyword">struct</span> {
    data <span class="keyword">string</span>
}

<span class="function">func</span> (m *MyStruct) <span class="function">Read</span>() <span class="keyword">string</span> {
    <span class="keyword">return</span> m.data
}

<span class="function">func</span> (m *MyStruct) <span class="function">Write</span>(s <span class="keyword">string</span>) {
    m.data = s
}

<span class="function">func</span> <span class="function">main</span>() {
    m := &MyStruct{data: <span class="string">"hello"</span>}
    
    <span class="comment">// æ¥å£è½¬æ¢ï¼šä»å…·ä½“ç±»å‹åˆ°æ¥å£</span>
    <span class="keyword">var</span> rw ReadWriter = m
    
    <span class="comment">// æ¥å£è½¬æ¢ï¼šä»å¤§æ¥å£åˆ°å°æ¥å£</span>
    <span class="keyword">var</span> r Reader = rw
    fmt.<span class="function">Println</span>(<span class="string">"è¯»å–:"</span>, r.<span class="function">Read</span>())
    
    <span class="comment">// æ¥å£è½¬æ¢ï¼šä»å°æ¥å£åˆ°å¤§æ¥å£ï¼ˆéœ€è¦ç±»å‹æ–­è¨€ï¼‰</span>
    <span class="keyword">if</span> rw2, ok := r.(ReadWriter); ok {
        rw2.<span class="function">Write</span>(<span class="string">"world"</span>)
    }
}</code></pre>

                <p><strong>8. nil æ¥å£çš„ç‰¹æ®Šæ€§ï¼š</strong></p>
                <pre><code><span class="keyword">package</span> main

<span class="keyword">import</span> <span class="string">"fmt"</span>

<span class="keyword">type</span> Error <span class="keyword">interface</span> {
    <span class="function">Error</span>() <span class="keyword">string</span>
}

<span class="keyword">type</span> MyError <span class="keyword">struct</span> {
    msg <span class="keyword">string</span>
}

<span class="function">func</span> (e *MyError) <span class="function">Error</span>() <span class="keyword">string</span> {
    <span class="keyword">return</span> e.msg
}

<span class="function">func</span> <span class="function">main</span>() {
    <span class="comment">// 1. å®Œå…¨çš„ nil æ¥å£</span>
    <span class="keyword">var</span> err1 <span class="keyword">interface</span>{} = <span class="keyword">nil</span>
    fmt.<span class="function">Println</span>(<span class="string">"err1 == nil:"</span>, err1 == <span class="keyword">nil</span>)  <span class="comment">// true</span>
    
    <span class="comment">// 2. åŒ…å« nil æŒ‡é’ˆçš„æ¥å£ï¼ˆä¸æ˜¯ nilï¼‰</span>
    <span class="keyword">var</span> err2 Error = (*MyError)(<span class="keyword">nil</span>)
    fmt.<span class="function">Println</span>(<span class="string">"err2 == nil:"</span>, err2 == <span class="keyword">nil</span>)  <span class="comment">// false</span>
    fmt.<span class="function">Println</span>(<span class="string">"err2 != nil ä½† err2.(*MyError) == nil:"</span>, err2.(*MyError) == <span class="keyword">nil</span>)
    
    <span class="comment">// 3. nil æ¥å£è°ƒç”¨æ–¹æ³•ä¼š panic</span>
    <span class="keyword">var</span> err3 <span class="keyword">interface</span>{} = <span class="keyword">nil</span>
    <span class="comment">// err3.(Error).Error() // panic</span>
    
    <span class="comment">// 4. å®‰å…¨æ£€æŸ¥</span>
    <span class="keyword">if</span> e, ok := err2.(Error); ok {
        fmt.<span class="function">Println</span>(<span class="string">"err2.Error():"</span>, e.<span class="function">Error</span>())
    }
}</code></pre>

                <p><strong>9. æ¥å£ä¸æŒ‡é’ˆï¼ˆå€¼æ¥æ”¶è€… vs æŒ‡é’ˆæ¥æ”¶è€…ï¼‰ï¼š</strong></p>
                <pre><code><span class="keyword">package</span> main

<span class="keyword">import</span> <span class="string">"fmt"</span>

<span class="keyword">type</span> Counter <span class="keyword">interface</span> {
    <span class="function">Increment</span>()
    <span class="function">Get</span>() <span class="keyword">int</span>
}

<span class="keyword">type</span> ValueCounter <span class="keyword">struct</span> {
    value <span class="keyword">int</span>
}

<span class="comment">// å€¼æ¥æ”¶è€…</span>
<span class="function">func</span> (v ValueCounter) <span class="function">Increment</span>() {
    v.value++  <span class="comment">// ä¸ä¼šä¿®æ”¹åŸå€¼</span>
}

<span class="function">func</span> (v ValueCounter) <span class="function">Get</span>() <span class="keyword">int</span> {
    <span class="keyword">return</span> v.value
}

<span class="keyword">type</span> PointerCounter <span class="keyword">struct</span> {
    value <span class="keyword">int</span>
}

<span class="comment">// æŒ‡é’ˆæ¥æ”¶è€…</span>
<span class="function">func</span> (p *PointerCounter) <span class="function">Increment</span>() {
    p.value++  <span class="comment">// ä¼šä¿®æ”¹åŸå€¼</span>
}

<span class="function">func</span> (p *PointerCounter) <span class="function">Get</span>() <span class="keyword">int</span> {
    <span class="keyword">return</span> p.value
}

<span class="function">func</span> <span class="function">main</span>() {
    <span class="comment">// å€¼æ¥æ”¶è€…ï¼šå€¼å’ŒæŒ‡é’ˆéƒ½å¯ä»¥èµ‹å€¼ç»™æ¥å£</span>
    v1 := ValueCounter{value: <span class="number">0</span>}
    <span class="keyword">var</span> c1 Counter = v1
    c1.<span class="function">Increment</span>()
    fmt.<span class="function">Println</span>(<span class="string">"v1.value:"</span>, v1.value)  <span class="comment">// 0ï¼ˆæœªä¿®æ”¹ï¼‰</span>
    
    v2 := &ValueCounter{value: <span class="number">0</span>}
    <span class="keyword">var</span> c2 Counter = v2
    c2.<span class="function">Increment</span>()
    fmt.<span class="function">Println</span>(<span class="string">"v2.value:"</span>, v2.value)  <span class="comment">// 0ï¼ˆæœªä¿®æ”¹ï¼‰</span>
    
    <span class="comment">// æŒ‡é’ˆæ¥æ”¶è€…ï¼šåªæœ‰æŒ‡é’ˆå¯ä»¥èµ‹å€¼ç»™æ¥å£</span>
    p := &PointerCounter{value: <span class="number">0</span>}
    <span class="keyword">var</span> c3 Counter = p
    c3.<span class="function">Increment</span>()
    fmt.<span class="function">Println</span>(<span class="string">"p.value:"</span>, p.value)  <span class="comment">// 1ï¼ˆå·²ä¿®æ”¹ï¼‰</span>
    
    <span class="comment">// var c4 Counter = PointerCounter{value: 0}  // ç¼–è¯‘é”™è¯¯</span>
}</code></pre>

                <p><strong>10. æ¥å£æ€§èƒ½ä¼˜åŒ–ï¼š</strong></p>
                <ul>
                    <li><strong>é¿å…é¢‘ç¹ç±»å‹æ–­è¨€</strong>ï¼šç¼“å­˜ç±»å‹æ–­è¨€ç»“æœ</li>
                    <li><strong>ä½¿ç”¨å°æ¥å£</strong>ï¼šæ¥å£æ–¹æ³•è¶Šå°‘ï¼Œæ€§èƒ½è¶Šå¥½</li>
                    <li><strong>é¿å…æ¥å£åµŒå¥—</strong>ï¼šå‡å°‘é—´æ¥è°ƒç”¨å±‚çº§</li>
                    <li><strong>å‡å°‘æ¥å£è½¬æ¢</strong>ï¼šé¿å…ä¸å¿…è¦çš„æ¥å£ç±»å‹è½¬æ¢</li>
                    <li><strong>ä½¿ç”¨å…·ä½“ç±»å‹</strong>ï¼šåœ¨æ€§èƒ½å…³é”®è·¯å¾„ä¸Šä½¿ç”¨å…·ä½“ç±»å‹è€Œéæ¥å£</li>
                </ul>
            </div>

            <div class="example-box">

                            <h3>Embedï¼ˆåµŒå…¥ï¼‰åº“ä½¿ç”¨</h3>

                            <p><strong>1. ç»“æ„ä½“åµŒå…¥ï¼ˆStruct Embeddingï¼‰ï¼š</strong></p>

                            <pre><code><span class="keyword">package</span> main

            

            <span class="keyword">import</span> <span class="string">"fmt"</span>

            

            <span class="comment">// åŸºç¡€ç»“æ„ä½“</span>

            <span class="keyword">type</span> Animal <span class="keyword">struct</span> {

                Name <span class="keyword">string</span>

                Age  <span class="keyword">int</span>

            }

            

            <span class="function">func</span> (a Animal) <span class="function">Speak</span>() {

                fmt.<span class="function">Printf</span>(<span class="string">"%s å‘å‡ºå£°éŸ³\n"</span>, a.Name)

            }

            

            <span class="function">func</span> (a Animal) <span class="function">Eat</span>() {

                fmt.<span class="function">Printf</span>(<span class="string">"%s åœ¨åƒä¸œè¥¿\n"</span>, a.Name)

            }

            

            <span class="comment">// åµŒå…¥ Animal</span>

            <span class="keyword">type</span> Dog <span class="keyword">struct</span> {

                Animal  <span class="comment">// åµŒå…¥ç»“æ„ä½“</span>

                Breed   <span class="keyword">string</span>

            }

            

            <span class="comment">// Dog ç‰¹æœ‰çš„æ–¹æ³•</span>

            <span class="function">func</span> (d Dog) <span class="function">Bark</span>() {

                fmt.<span class="function">Printf</span>(<span class="string">"%s æ±ªæ±ªå«ï¼\n"</span>, d.Name)

            }

            

            <span class="keyword">type</span> Cat <span class="keyword">struct</span> {

                Animal  <span class="comment">// åµŒå…¥ç»“æ„ä½“</span>

                Color   <span class="keyword">string</span>

            }

            

            <span class="function">func</span> (c Cat) <span class="function">Meow</span>() {

                fmt.<span class="function">Printf</span>(<span class="string">"%s å–µå–µå«ï¼\n"</span>, c.Name)

            }

            

            <span class="function">func</span> <span class="function">main</span>() {

                dog := Dog{

                    Animal: Animal{Name: <span class="string">"æ—ºè´¢"</span>, Age: <span class="number">3</span>},

                    Breed:  <span class="string">"é‡‘æ¯›"</span>,

                }

                

                <span class="comment">// å¯ä»¥ç›´æ¥è°ƒç”¨åµŒå…¥ç»“æ„ä½“çš„æ–¹æ³•</span>

                dog.<span class="function">Speak</span>()   <span class="comment">// æ—ºè´¢ å‘å‡ºå£°éŸ³</span>

                dog.<span class="function">Eat</span>()     <span class="comment">// æ—ºè´¢ åœ¨åƒä¸œè¥¿</span>

                dog.<span class="function">Bark</span>()    <span class="comment">// æ—ºè´¢ æ±ªæ±ªå«ï¼</span>

                

                <span class="comment">// å¯ä»¥ç›´æ¥è®¿é—®åµŒå…¥ç»“æ„ä½“çš„å­—æ®µ</span>

                fmt.<span class="function">Printf</span>(<span class="string">"%s ä»Šå¹´ %d å²\n"</span>, dog.Name, dog.Age)

                

                cat := Cat{

                    Animal: Animal{Name: <span class="string">"å’ªå’ª"</span>, Age: <span class="number">2</span>},

                    Color:  <span class="string">"ç™½è‰²"</span>,

                }

                

                cat.<span class="function">Speak</span>()

                cat.<span class="function">Meow</span>()

            }</code></pre>

            

                            <p><strong>2. æ¥å£åµŒå…¥ï¼ˆInterface Embeddingï¼‰ï¼š</strong></p>

            

                                                        <pre><code><span class="keyword">package</span> main

            

                            

            

                            <span class="keyword">import</span> <span class="string">"fmt"</span>

            

                            

            

                            <span class="comment">// åŸºç¡€æ¥å£</span>

            

                            <span class="keyword">type</span> Reader <span class="keyword">interface</span> {

            

                                <span class="function">Read</span>([]<span class="keyword">byte</span>) (<span class="keyword">int</span>, <span class="keyword">error</span>)

            

                            }

            

                            

            

                            <span class="keyword">type</span> Writer <span class="keyword">interface</span> {

            

                                <span class="function">Write</span>([]<span class="keyword">byte</span>) (<span class="keyword">int</span>, <span class="keyword">error</span>)

            

                            }

            

                            

            

                            <span class="comment">// åµŒå…¥æ¥å£</span>

            

                            <span class="keyword">type</span> ReadWriter <span class="keyword">interface</span> {

            

                                Reader   <span class="comment">// åµŒå…¥ Reader æ¥å£</span>

            

                                Writer   <span class="comment">// åµŒå…¥ Writer æ¥å£</span>

            

                                <span class="function">Close</span>() <span class="keyword">error</span>  <span class="comment">// é¢å¤–çš„æ–¹æ³•</span>

            

                            }

            

                            

            

                            <span class="keyword">type</span> File <span class="keyword">struct</span> {

            

                                name <span class="keyword">string</span>

            

                            }

            

                            

            

                            <span class="function">func</span> (f *File) <span class="function">Read</span>(p []<span class="keyword">byte</span>) (<span class="keyword">int</span>, <span class="keyword">error</span>) {

            

                                fmt.<span class="function">Println</span>(<span class="string">"è¯»å–æ–‡ä»¶:"</span>, f.name)

            

                                <span class="keyword">return</span> <span class="function">len</span>(p), <span class="keyword">nil</span>

            

                            }

            

                            

            

                            <span class="function">func</span> (f *File) <span class="function">Write</span>(p []<span class="keyword">byte</span>) (<span class="keyword">int</span>, <span class="keyword">error</span>) {

            

                                fmt.<span class="function">Println</span>(<span class="string">"å†™å…¥æ–‡ä»¶:"</span>, f.name)

            

                                <span class="keyword">return</span> <span class="function">len</span>(p), <span class="keyword">nil</span>

            

                            }

            

                            

            

                            <span class="function">func</span> (f *File) <span class="function">Close</span>() <span class="keyword">error</span> {

            

                                fmt.<span class="function">Println</span>(<span class="string">"å…³é—­æ–‡ä»¶:"</span>, f.name)

            

                                <span class="keyword">return</span> <span class="keyword">nil</span>

            

                            }

            

                            

            

                            <span class="function">func</span> <span class="function">main</span>() {

            

                                file := &File{<span class="string">"data.txt"</span>}

            

                                

            

                                <span class="comment">// File å®ç°äº† ReadWriter æ¥å£</span>

            

                                <span class="keyword">var</span> rw ReadWriter = file

            

                                

            

                                rw.<span class="function">Read</span>(<span class="keyword">nil</span>)

            

                                rw.<span class="function">Write</span>(<span class="keyword">nil</span>)

                rw.<span class="function">Close</span>()

            }</code></pre>

            

                            <p><strong>3. å¤šé‡åµŒå…¥ï¼š</strong></p>

                            <pre><code><span class="keyword">package</span> main

            

            <span class="keyword">import</span> <span class="string">"fmt"</span>

            

            <span class="keyword">type</span> Base1 <span class="keyword">struct</span> {

                Field1 <span class="keyword">string</span>

            }

            

            <span class="function">func</span> (b Base1) <span class="function">Method1</span>() {

                fmt.<span class="function">Println</span>(<span class="string">"Base1.Method1"</span>)

            }

            

            <span class="keyword">type</span> Base2 <span class="keyword">struct</span> {

                Field2 <span class="keyword">int</span>

            }

            

            <span class="function">func</span> (b Base2) <span class="function">Method2</span>() {

                fmt.<span class="function">Println</span>(<span class="string">"Base2.Method2"</span>)

            }

            

            <span class="keyword">type</span> Derived <span class="keyword">struct</span> {

                Base1  <span class="comment">// åµŒå…¥ Base1</span>

                Base2  <span class="comment">// åµŒå…¥ Base2</span>

                Field3 <span class="keyword">bool</span>

            }

            

            <span class="function">func</span> (d Derived) <span class="function">Method3</span>() {

                fmt.<span class="function">Println</span>(<span class="string">"Derived.Method3"</span>)

            }

            

            <span class="function">func</span> <span class="function">main</span>() {

                d := Derived{

                    Base1: Base1{Field1: <span class="string">"value1"</span>},

                    Base2: Base2{Field2: <span class="number">42</span>},

                    Field3: <span class="keyword">true</span>,

                }

                

                d.<span class="function">Method1</span>()  <span class="comment">// æ¥è‡ª Base1</span>

                d.<span class="function">Method2</span>()  <span class="comment">// æ¥è‡ª Base2</span>

                d.<span class="function">Method3</span>()  <span class="comment">// æ¥è‡ª Derived</span>

                

                fmt.<span class="function">Println</span>(d.Field1, d.Field2, d.Field3)

            }</code></pre>

            

                            <p><strong>4. åµŒå…¥ä¸è¦†ç›–ï¼š</strong></p>

                            <pre><code><span class="keyword">package</span> main

            

            <span class="keyword">import</span> <span class="string">"fmt"</span>

            

            <span class="keyword">type</span> Base <span class="keyword">struct</span> {

                Name <span class="keyword">string</span>

            }

            

            <span class="function">func</span> (b Base) <span class="function">Greet</span>() {

                fmt.<span class="function">Println</span>(<span class="string">"Hello from Base:"</span>, b.Name)

            }

            

            <span class="keyword">type</span> Derived <span class="keyword">struct</span> {

                Base

                Name <span class="keyword">string</span>  <span class="comment">// è¦†ç›– Base.Name</span>

            }

            

            <span class="comment">// è¦†ç›– Base.Greet</span>

            <span class="function">func</span> (d Derived) <span class="function">Greet</span>() {

                fmt.<span class="function">Println</span>(<span class="string">"Hello from Derived:"</span>, d.Name)

                <span class="comment">// è°ƒç”¨è¢«è¦†ç›–çš„æ–¹æ³•</span>

                d.Base.Greet()

            }

            

            <span class="function">func</span> <span class="function">main</span>() {

                d := Derived{

                    Base: Base{Name: <span class="string">"BaseName"</span>},

                    Name: <span class="string">"DerivedName"</span>,

                }

                

                fmt.<span class="function">Println</span>(<span class="string">"d.Name:"</span>, d.Name)        <span class="comment">// DerivedName</span>

                fmt.<span class="function">Println</span>(<span class="string">"d.Base.Name:"</span>, d.Base.Name)  <span class="comment">// BaseName</span>

                

                d.<span class="function">Greet</span>()  <span class="comment">// è°ƒç”¨ Derived.Greet</span>

            }</code></pre>

            

                            <p><strong>5. åµŒå…¥çš„æ³¨æ„äº‹é¡¹ï¼š</strong></p>

                            <ul>

                                <li><strong>å‘½åå†²çª</strong>ï¼šå¦‚æœåµŒå…¥çš„å¤šä¸ªç»“æ„ä½“æœ‰ç›¸åŒçš„å­—æ®µåï¼Œéœ€è¦æ˜ç¡®æŒ‡å®š</li>

                                <li><strong>æ–¹æ³•è¦†ç›–</strong>ï¼šå¤–å±‚ç»“æ„ä½“çš„æ–¹æ³•ä¼šè¦†ç›–åµŒå…¥ç»“æ„ä½“çš„åŒåæ–¹æ³•</li>

                                <li><strong>é›¶å€¼é—®é¢˜</strong>ï¼šåµŒå…¥çš„ç»“æ„ä½“å­—æ®µä¼šè¢«åˆå§‹åŒ–ä¸ºé›¶å€¼</li>

                                <li><strong>åºåˆ—åŒ–</strong>ï¼šåµŒå…¥ç»“æ„ä½“çš„å­—æ®µä¼šè¢«å¹³é“ºåˆ°å¤–å±‚ç»“æ„ä½“</li>

                            </ul>

                            <pre><code><span class="keyword">package</span> main

            

            <span class="keyword">import</span> (

                <span class="string">"encoding/json"</span>

                <span class="string">"fmt"</span>

            )

            

            <span class="keyword">type</span> Address <span class="keyword">struct</span> {

                City    <span class="keyword">string</span> <span class="string">`json:"city"`</span>

                Country <span class="keyword">string</span> <span class="string">`json:"country"`</span>

            }

            

            <span class="keyword">type</span> Person <span class="keyword">struct</span> {

                Name    <span class="keyword">string</span> <span class="string">`json:"name"`</span>

                Address <span class="comment">// åµŒå…¥ Address</span>

            }

            

            <span class="function">func</span> <span class="function">main</span>() {

                p := Person{

                    Name: <span class="string">"å¼ ä¸‰"</span>,

                    Address: Address{

                        City:    <span class="string">"åŒ—äº¬"</span>,

                        Country: <span class="string">"ä¸­å›½"</span>,

                    },

                }

                

                <span class="comment">// JSON åºåˆ—åŒ–æ—¶ï¼ŒAddress çš„å­—æ®µä¼šè¢«å¹³é“º</span>

                data, _ := json.<span class="function">Marshal</span>(p)

                fmt.<span class="function">Println</span>(<span class="function">string</span>(data))

                <span class="comment">// è¾“å‡º: {"name":"å¼ ä¸‰","city":"åŒ—äº¬","country":"ä¸­å›½"}</span>

            }</code></pre>

            

                            <p><strong>6. åµŒå…¥ä¸ç»„åˆï¼ˆCompositionï¼‰ï¼š</strong></p>

                            <pre><code><span class="keyword">package</span> main

            

            <span class="keyword">import</span> <span class="string">"fmt"</span>

            

            <span class="comment">// åŸºç¡€ç»„ä»¶</span>

            <span class="keyword">type</span> Engine <span class="keyword">struct</span> {

                Power <span class="keyword">int</span>

            }

            

            <span class="function">func</span> (e *Engine) <span class="function">Start</span>() {

                fmt.<span class="function">Printf</span>(<span class="string">"å¼•æ“å¯åŠ¨ï¼ŒåŠŸç‡: %d\n"</span>, e.Power)

            }

            

            <span class="keyword">type</span> Wheels <span class="keyword">struct</span> {

                Count <span class="keyword">int</span>

            }

            

            <span class="function">func</span> (w *Wheels) <span class="function">Rotate</span>() {

                fmt.<span class="function">Printf</span>(<span class="string">"%d ä¸ªè½®å­è½¬åŠ¨\n"</span>, w.Count)

            }

            

            <span class="comment">// é€šè¿‡åµŒå…¥ç»„åˆæˆæ±½è½¦</span>

            <span class="keyword">type</span> Car <span class="keyword">struct</span> {

                Engine

                Wheels

                Brand <span class="keyword">string</span>

            }

            

            <span class="function">func</span> (c Car) <span class="function">Drive</span>() {

                c.<span class="function">Start</span>()

                c.<span class="function">Rotate</span>()

                fmt.<span class="function">Printf</span>(<span class="string">"%s æ±½è½¦è¡Œé©¶ä¸­\n"</span>, c.Brand)

            }

            

            <span class="function">func</span> <span class="function">main</span>() {

                car := Car{

                    Engine: Engine{Power: <span class="number">200</span>},

                    Wheels: Wheels{Count: <span class="number">4</span>},

                    Brand:  <span class="string">"ç‰¹æ–¯æ‹‰"</span>,

                }

                car.<span class="function">Drive</span>()

            }</code></pre>

            

                            <p><strong>7. åµŒå…¥ä¸æ¥å£ï¼ˆInterface Embeddingï¼‰ï¼š</strong></p>

                            <pre><code><span class="keyword">package</span> main

            

            <span class="keyword">import</span> <span class="string">"fmt"</span>

            

            <span class="comment">// åŸºç¡€æ¥å£</span>

            <span class="keyword">type</span> Reader <span class="keyword">interface</span> {

                <span class="function">Read</span>([]<span class="keyword">byte</span>) (<span class="keyword">int</span>, <span class="keyword">error</span>)

            }

            

            <span class="keyword">type</span> Writer <span class="keyword">interface</span> {

                <span class="function">Write</span>([]<span class="keyword">byte</span>) (<span class="keyword">int</span>, <span class="keyword">error</span>)

            }

            

            <span class="keyword">type</span> Closer <span class="keyword">interface</span> {

                <span class="function">Close</span>() <span class="keyword">error</span>

            }

            

            <span class="comment">// ç»„åˆå¤šä¸ªæ¥å£</span>

            <span class="keyword">type</span> ReadWriteCloser <span class="keyword">interface</span> {

                Reader

                Writer

                Closer

            }

            

            <span class="comment">// åµŒå…¥æ¥å£å®ç°</span>

            <span class="keyword">type</span> MyFile <span class="keyword">struct</span> {

                name <span class="keyword">string</span>

                data []<span class="keyword">byte</span>

            }

            

            <span class="function">func</span> (f *MyFile) <span class="function">Read</span>(p []<span class="keyword">byte</span>) (<span class="keyword">int</span>, <span class="keyword">error</span>) {

                fmt.<span class="function">Println</span>(<span class="string">"è¯»å–æ–‡ä»¶:"</span>, f.name)

                <span class="keyword">return</span> <span class="function">len</span>(p), <span class="keyword">nil</span>

            }

            

            <span class="function">func</span> (f *MyFile) <span class="function">Write</span>(p []<span class="keyword">byte</span>) (<span class="keyword">int</span>, <span class="keyword">error</span>) {

                f.data = <span class="function">append</span>(f.data, p...)

                fmt.<span class="function">Println</span>(<span class="string">"å†™å…¥æ–‡ä»¶:"</span>, f.name)

                <span class="keyword">return</span> <span class="function">len</span>(p), <span class="keyword">nil</span>

            }

            

            <span class="function">func</span> (f *MyFile) <span class="function">Close</span>() <span class="keyword">error</span> {

                fmt.<span class="function">Println</span>(<span class="string">"å…³é—­æ–‡ä»¶:"</span>, f.name)

                <span class="keyword">return</span> <span class="keyword">nil</span>

            }

            

            <span class="function">func</span> <span class="function">main</span>() {

                file := &MyFile{name: <span class="string">"test.txt"</span>}

                

                <span class="comment">// MyFile è‡ªåŠ¨å®ç°äº† ReadWriteCloser æ¥å£</span>

                <span class="keyword">var</span> rwc ReadWriteCloser = file

                

                rwc.<span class="function">Write</span>([]<span class="keyword">byte</span>(<span class="string">"hello"</span>))

                rwc.<span class="function">Read</span>(<span class="keyword">nil</span>)

                rwc.<span class="function">Close</span>()

            }</code></pre>

            

                            <p><strong>8. åµŒå…¥ä¸å¹¶å‘ï¼ˆConcurrencyï¼‰ï¼š</strong></p>

                            <pre><code><span class="keyword">package</span> main

            

            <span class="keyword">import</span> (

                <span class="string">"fmt"</span>

                <span class="string">"sync"</span>

                <span class="string">"time"</span>

            )

            

            <span class="comment">// åŸºç¡€ç¼“å­˜ç»“æ„</span>

            <span class="keyword">type</span> Cache <span class="keyword">struct</span> {

                data <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">string</span>

            }

            

            <span class="function">func</span> (c *Cache) <span class="function">Get</span>(key <span class="keyword">string</span>) (<span class="keyword">string</span>, <span class="keyword">bool</span>) {

                val, ok := c.data[key]

                <span class="keyword">return</span> val, ok

            }

            

            <span class="function">func</span> (c *Cache) <span class="function">Set</span>(key, value <span class="keyword">string</span>) {

                c.data[key] = value

            }

            

            <span class="comment">// åµŒå…¥å¹¶æ·»åŠ å¹¶å‘å®‰å…¨</span>

            <span class="keyword">type</span> SafeCache <span class="keyword">struct</span> {

                Cache

                mu sync.RWMutex

            }

            

            <span class="function">func</span> (sc *SafeCache) <span class="function">Get</span>(key <span class="keyword">string</span>) (<span class="keyword">string</span>, <span class="keyword">bool</span>) {

                sc.mu.RLock()

                <span class="keyword">defer</span> sc.mu.RUnlock()

                <span class="keyword">return</span> sc.Cache.<span class="function">Get</span>(key)

            }

            

            <span class="function">func</span> (sc *SafeCache) <span class="function">Set</span>(key, value <span class="keyword">string</span>) {

                sc.mu.Lock()

                <span class="keyword">defer</span> sc.mu.Unlock()

                sc.Cache.<span class="function">Set</span>(key, value)

            }

            

            <span class="function">func</span> <span class="function">main</span>() {

                cache := &SafeCache{

                    Cache: Cache{data: <span class="function">make</span>(<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">string</span>)},

                }

                

                <span class="comment">// å¹¶å‘æµ‹è¯•</span>

                <span class="keyword">var</span> wg sync.WaitGroup

                

                <span class="keyword">for</span> i := <span class="number">0</span>; i < <span class="number">10</span>; i++ {

                    wg.<span class="function">Add</span>(<span class="number">1</span>)

                    <span class="keyword">go</span> <span class="function">func</span>(n <span class="keyword">int</span>) {

                        <span class="keyword">defer</span> wg.<span class="function">Done</span>()

                        key := fmt.<span class="function">Sprintf</span>(<span class="string">"key%d"</span>, n)

                        value := fmt.<span class="function">Sprintf</span>(<span class="string">"value%d"</span>, n)

                        cache.<span class="function">Set</span>(key, value)

                        fmt.<span class="function">Printf</span>(<span class="string">"è®¾ç½®: %s = %s\n"</span>, key, value)

                    }(i)

                }

                

                wg.<span class="function">Wait</span>()

                

                <span class="comment">// è¯»å–æ•°æ®</span>

                <span class="keyword">for</span> i := <span class="number">0</span>; i < <span class="number">10</span>; i++ {

                    key := fmt.<span class="function">Sprintf</span>(<span class="string">"key%d"</span>, i)

                    <span class="keyword">if</span> val, ok := cache.<span class="function">Get</span>(key); ok {

                        fmt.<span class="function">Printf</span>(<span class="string">"è¯»å–: %s = %s\n"</span>, key, val)

                    }

                }

            }</code></pre>

            

                            <p><strong>9. åµŒå…¥ä¸æµ‹è¯•ï¼ˆTestingï¼‰ï¼š</strong></p>

                            <pre><code><span class="keyword">package</span> main

            

            <span class="keyword">import</span> <span class="string">"fmt"</span>

            

            <span class="comment">// æ•°æ®åº“æ¥å£</span>

            <span class="keyword">type</span> Database <span class="keyword">interface</span> {

                <span class="function">Query</span>(sql <span class="keyword">string</span>) ([]<span class="keyword">string</span>, <span class="keyword">error</span>)

                <span class="function">Execute</span>(sql <span class="keyword">string</span>) <span class="keyword">error</span>

            }

            

            <span class="comment">// çœŸå®æ•°æ®åº“å®ç°</span>

            <span class="keyword">type</span> RealDB <span class="keyword">struct</span> {

                connectionString <span class="keyword">string</span>

            }

            

            <span class="function">func</span> (db *RealDB) <span class="function">Query</span>(sql <span class="keyword">string</span>) ([]<span class="keyword">string</span>, <span class="keyword">error</span>) {

                fmt.<span class="function">Printf</span>(<span class="string">"æ‰§è¡ŒæŸ¥è¯¢: %s\n"</span>, sql)

                <span class="keyword">return</span> []<span class="keyword">string</span>{<span class="string">"result1"</span>, <span class="string">"result2"</span>}, <span class="keyword">nil</span>

            }

            

            <span class="function">func</span> (db *RealDB) <span class="function">Execute</span>(sql <span class="keyword">string</span>) <span class="keyword">error</span> {

                fmt.<span class="function">Printf</span>(<span class="string">"æ‰§è¡ŒSQL: %s\n"</span>, sql)

                <span class="keyword">return</span> <span class="keyword">nil</span>

            }

            

            <span class="comment">// æµ‹è¯•ç”¨çš„æ¨¡æ‹Ÿæ•°æ®åº“</span>

            <span class="keyword">type</span> MockDB <span class="keyword">struct</span> {

                queries []<span class="keyword">string</span>

                results [][]<span class="keyword">string</span>

            }

            

            <span class="function">func</span> (m *MockDB) <span class="function">Query</span>(sql <span class="keyword">string</span>) ([]<span class="keyword">string</span>, <span class="keyword">error</span>) {

                m.queries = <span class="function">append</span>(m.queries, sql)

                <span class="keyword">return</span> m.results[<span class="function">len</span>(m.results)-<span class="number">1</span>], <span class="keyword">nil</span>

            }

            

            <span class="function">func</span> (m *MockDB) <span class="function">Execute</span>(sql <span class="keyword">string</span>) <span class="keyword">error</span> {

                m.queries = <span class="function">append</span>(m.queries, sql)

                <span class="keyword">return</span> <span class="keyword">nil</span>

            }

            

            <span class="function">func</span> (m *MockDB) <span class="function">GetQueries</span>() []<span class="keyword">string</span> {

                <span class="keyword">return</span> m.queries

            }

            

            <span class="comment">// ä½¿ç”¨åµŒå…¥çš„æœåŠ¡</span>

            <span class="keyword">type</span> UserService <span class="keyword">struct</span> {

                Database

            }

            

            <span class="function">func</span> (s *UserService) <span class="function">GetUsers</span>() ([]<span class="keyword">string</span>, <span class="keyword">error</span>) {

                <span class="keyword">return</span> s.<span class="function">Query</span>(<span class="string">"SELECT * FROM users"</span>)

            }

            

            <span class="function">func</span> (s *UserService) <span class="function">CreateUser</span>(name <span class="keyword">string</span>) <span class="keyword">error</span> {

                sql := fmt.<span class="function">Sprintf</span>(<span class="string">"INSERT INTO users (name) VALUES ('%s')"</span>, name)

                <span class="keyword">return</span> s.<span class="function">Execute</span>(sql)

            }

            

            <span class="function">func</span> <span class="function">main</span>() {

                <span class="comment">// ä½¿ç”¨çœŸå®æ•°æ®åº“</span>

                realDB := &RealDB{connectionString: <span class="string">"localhost:3306"</span>}

                realService := &UserService{Database: realDB}

                

                realService.<span class="function">CreateUser</span>(<span class="string">"å¼ ä¸‰"</span>)

                users, _ := realService.<span class="function">GetUsers</span>()

                fmt.<span class="function">Println</span>(<span class="string">"ç”¨æˆ·åˆ—è¡¨:"</span>, users)

                

                <span class="comment">// ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®åº“ï¼ˆæµ‹è¯•åœºæ™¯ï¼‰</span>

                mockDB := &MockDB{

                    results: [][]<span class="keyword">string</span>{{<span class="string">"user1"</span>, <span class="string">"user2"</span>}},

                }

                mockService := &UserService{Database: mockDB}

                

                mockService.<span class="function">CreateUser</span>(<span class="string">"æå››"</span>)

                mockUsers, _ := mockService.<span class="function">GetUsers</span>()

                fmt.<span class="function">Println</span>(<span class="string">"æ¨¡æ‹Ÿç”¨æˆ·åˆ—è¡¨:"</span>, mockUsers)

                fmt.<span class="function">Println</span>(<span class="string">"æ‰§è¡Œçš„æŸ¥è¯¢:"</span>, mockDB.<span class="function">GetQueries</span>())

            }</code></pre>

            

                            <p><strong>10. åµŒå…¥ä¸ä¸­é—´ä»¶ï¼ˆMiddlewareï¼‰ï¼š</strong></p>

                            <pre><code><span class="keyword">package</span> main

            

            <span class="keyword">import</span> <span class="string">"fmt"</span>

            

            <span class="comment">// åŸºç¡€å¤„ç†å™¨</span>

            <span class="keyword">type</span> Handler <span class="keyword">interface</span> {

                <span class="function">Handle</span>(<span class="keyword">string</span>) <span class="keyword">string</span>

            }

            

            <span class="keyword">type</span> BaseHandler <span class="keyword">struct</span>{}

            

            <span class="function">func</span> (h BaseHandler) <span class="function">Handle</span>(request <span class="keyword">string</span>) <span class="keyword">string</span> {

                <span class="keyword">return</span> <span class="string">"å¤„ç†: "</span> + request

            }

            

            <span class="comment">// æ—¥å¿—ä¸­é—´ä»¶</span>

            <span class="keyword">type</span> LoggingMiddleware <span class="keyword">struct</span> {

                Handler

            }

            

            <span class="function">func</span> (l *LoggingMiddleware) <span class="function">Handle</span>(request <span class="keyword">string</span>) <span class="keyword">string</span> {

                fmt.<span class="function">Printf</span>(<span class="string">"æ—¥å¿—: æ”¶åˆ°è¯·æ±‚ - %s\n"</span>, request)

                result := l.Handler.<span class="function">Handle</span>(request)

                fmt.<span class="function">Printf</span>(<span class="string">"æ—¥å¿—: è¿”å›ç»“æœ - %s\n"</span>, result)

                <span class="keyword">return</span> result

            }

            

            <span class="comment">// è®¤è¯ä¸­é—´ä»¶</span>

            <span class="keyword">type</span> AuthMiddleware <span class="keyword">struct</span> {

                Handler

                token <span class="keyword">string</span>

            }

            

            <span class="function">func</span> (a *AuthMiddleware) <span class="function">Handle</span>(request <span class="keyword">string</span>) <span class="keyword">string</span> {

                fmt.<span class="function">Printf</span>(<span class="string">"è®¤è¯: éªŒè¯ä»¤ç‰Œ\n"</span>)

                <span class="keyword">return</span> a.Handler.<span class="function">Handle</span>(request)

            }

            

            <span class="function">func</span> <span class="function">main</span>() {

                <span class="comment">// ç»„åˆä¸­é—´ä»¶</span>

                base := BaseHandler{}

                withLogging := &LoggingMiddleware{Handler: base}

                withAuth := &AuthMiddleware{Handler: withLogging, token: <span class="string">"secret"</span>}

                

                result := withAuth.<span class="function">Handle</span>(<span class="string">"GET /users"</span>)

                fmt.<span class="function">Println</span>(<span class="string">"æœ€ç»ˆç»“æœ:"</span>, result)

            }</code></pre>

            

                            <p><strong>11. åµŒå…¥çš„æœ€ä½³å®è·µï¼š</strong></p>

            

                                                        <ul>

            

                                                            <li><strong>ä¼˜å…ˆä½¿ç”¨ç»„åˆè€Œéç»§æ‰¿</strong>ï¼šGo ä¸æ”¯æŒç»§æ‰¿ï¼ŒåµŒå…¥æ˜¯å®ç°ä»£ç å¤ç”¨çš„æœ€ä½³æ–¹å¼</li>

            

                                                            <li><strong>æ˜ç¡®åµŒå…¥çš„æ„å›¾</strong>ï¼šåµŒå…¥åº”è¯¥æ˜¯"is-a"å…³ç³»ï¼Œè€Œä¸æ˜¯"has-a"å…³ç³»</li>

            

                                                            <li><strong>é¿å…è¿‡åº¦åµŒå…¥</strong>ï¼šè¿‡å¤šçš„åµŒå¥—ä¼šä½¿ä»£ç éš¾ä»¥ç†è§£å’Œç»´æŠ¤</li>

            

                                                            <li><strong>æ–‡æ¡£åŒ–åµŒå…¥è¡Œä¸º</strong>ï¼šæ˜ç¡®è¯´æ˜åµŒå…¥çš„å­—æ®µå’Œæ–¹æ³•çš„ä½¿ç”¨æ–¹å¼</li>

            

                                                            <li><strong>è€ƒè™‘æ¥å£åµŒå…¥</strong>ï¼šæ¥å£åµŒå…¥å¯ä»¥åˆ›å»ºæ›´çµæ´»çš„ç»„åˆæ–¹å¼</li>

            

                                                        </ul>

            

                                                    </div>

            

                            

            

                                        

                                        <h2 id="tags">ç»“æ„ä½“æ ‡ç­¾</h2>
            <pre><code><span class="keyword">package</span> main

<span class="keyword">import</span> (
    <span class="string">"encoding/json"</span>
    <span class="string">"fmt"</span>
    <span class="string">"reflect"</span>
)

<span class="keyword">type</span> User <span class="keyword">struct</span> {
    ID       <span class="keyword">int</span>    `json:"id"`
    Name     <span class="keyword">string</span> `json:"name"`
    Email    <span class="keyword">string</span> `json:"email"`
    Password <span class="keyword">string</span> `json:"-"` <span class="comment">// ä¸è¿›è¡Œ JSON åºåˆ—åŒ–</span>
}

<span class="function">func</span> <span class="function">main</span>() {
    user := User{
        ID:       <span class="number">1</span>,
        Name:     <span class="string">"å¼ ä¸‰"</span>,
        Email:    <span class="string">"zhangsan@example.com"</span>,
        Password: <span class="string">"secret"</span>,
    }

    <span class="comment">// JSON åºåˆ—åŒ–</span>
    jsonData, _ := json.<span class="function">Marshal</span>(user)
    fmt.<span class="function">Println</span>(<span class="string">"JSON:"</span>, <span class="keyword">string</span>(jsonData))

    <span class="comment">// åå°„è·å–æ ‡ç­¾</span>
    t := reflect.<span class="function">TypeOf</span>(user)
    <span class="keyword">for</span> i := <span class="number">0</span>; i < t.<span class="function">NumField</span>(); i++ {
        field := t.<span class="function">Field</span>(i)
        fmt.<span class="function">Printf</span>(<span class="string">"å­—æ®µ: %s, æ ‡ç­¾: %s\n"</span>, field.Name, field.Tag.<span class="function">Get</span>(<span class="string">"json"</span>))
    }
}</code></pre>
        </div>
    </div>
<script src="code-collapse.js"></script>

</body>
    <script src="navigation.js"></script>
</html>