<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ³›å‹ - Go è¯­è¨€å­¦ä¹ æ•™ç¨‹</title>
    <link rel="stylesheet" href="styles.css?v=1.4">
    <script src="scroll.js"></script>
    </head>
<body>
    <div class="container">
        <aside class="sidebar">
        <!-- å¯¼èˆªæ å°†é€šè¿‡JavaScriptåŠ¨æ€åŠ è½½ -->
    </aside>
        <div class="content">
            <a href="index.html" class="back-link">â† è¿”å›é¦–é¡µ</a>
            <h1>æ³›å‹ï¼ˆGenericsï¼‰- Go 1.26</h1>

            <h2 id="intro">ä»€ä¹ˆæ˜¯æ³›å‹ï¼Ÿ</h2>
            <p>æ³›å‹æ˜¯ Go 1.18 å¼•å…¥çš„é‡è¦ç‰¹æ€§ï¼Œå…è®¸ç¼–å†™å¯ä»¥å¤„ç†å¤šç§ç±»å‹çš„ä»£ç ï¼Œè€Œä¸éœ€è¦ä¸ºæ¯ç§ç±»å‹é‡å¤ç¼–å†™ç›¸åŒçš„é€»è¾‘ã€‚æ³›å‹æé«˜äº†ä»£ç çš„å¤ç”¨æ€§å’Œç±»å‹å®‰å…¨æ€§ã€‚</p>
            
            <!-- æ³›å‹ä¼˜åŠ¿å¯¹æ¯” -->
            <div class="feature-grid">
                <div class="feature-card">
                    <div class="icon">ğŸ›¡ï¸</div>
                    <h4>ç±»å‹å®‰å…¨</h4>
                    <p>ç¼–è¯‘æ—¶æ£€æŸ¥ï¼Œé¿å…è¿è¡Œæ—¶ç±»å‹é”™è¯¯</p>
                </div>
                <div class="feature-card">
                    <div class="icon">â™»ï¸</div>
                    <h4>ä»£ç å¤ç”¨</h4>
                    <p>ä¸€æ¬¡ç¼–å†™ï¼Œæ”¯æŒå¤šç§ç±»å‹</p>
                </div>
                <div class="feature-card">
                    <div class="icon">âš¡</div>
                    <h4>é›¶è¿è¡Œæ—¶å¼€é”€</h4>
                    <p>ç¼–è¯‘æ—¶å®ä¾‹åŒ–ï¼Œæ— æ€§èƒ½æŸå¤±</p>
                </div>
                <div class="feature-card">
                    <div class="icon">ğŸ”„</div>
                    <h4>è‡ªå¼•ç”¨æ³›å‹ (1.26)</h4>
                    <p>æ”¯æŒé€’å½’ç±»å‹çº¦æŸ</p>
                </div>
            </div>

            <!-- ç±»å‹çº¦æŸå±‚çº§ -->
            <h3>ç±»å‹çº¦æŸå±‚çº§</h3>
            <div class="type-hierarchy">
                <div class="hierarchy-level">
                    <div class="hierarchy-node">any</div>
                    <span class="hierarchy-arrow">â†</span>
                    <div class="hierarchy-node">æ‰€æœ‰ç±»å‹ (ç©ºçº¦æŸ)</div>
                </div>
                <div class="hierarchy-level">
                    <div class="hierarchy-node">comparable</div>
                    <span class="hierarchy-arrow">â†</span>
                    <div class="hierarchy-node">å¯æ¯”è¾ƒç±»å‹ (==, !=)</div>
                </div>
                <div class="hierarchy-level">
                    <div class="hierarchy-node">cmp.Ordered</div>
                    <span class="hierarchy-arrow">â†</span>
                    <div class="hierarchy-node">å¯æ’åºç±»å‹ (&lt;, &gt;, &lt;=, &gt;=)</div>
                </div>
                <div class="hierarchy-level">
                    <div class="hierarchy-node highlight">è‡ªå®šä¹‰çº¦æŸ</div>
                    <span class="hierarchy-arrow">â†</span>
                    <div class="hierarchy-node">interface { ~int | float64 }</div>
                </div>
            </div>

            <h2 id="functions">æ³›å‹å‡½æ•°</h2>
            <pre><code><span class="keyword">package</span> main

<span class="keyword">import</span> <span class="string">"fmt"</span>
<span class="keyword">import</span> <span class="string">"cmp"</span>

<span class="comment">// æ³›å‹å‡½æ•°ï¼šä½¿ç”¨ cmp.Ordered çº¦æŸ</span>
<span class="function">func</span> <span class="function">Min</span>[T <span class="keyword">cmp.Ordered</span>](x, y T) T {
    <span class="keyword">if</span> x &lt; y {
        <span class="keyword">return</span> x
    }
    <span class="keyword">return</span> y
}

<span class="function">func</span> <span class="function">main</span>() {
    <span class="comment">// ä½¿ç”¨æ•´æ•°</span>
    fmt.<span class="function">Println</span>(<span class="function">Min</span>(<span class="number">5</span>, <span class="number">3</span>))  <span class="comment">// 3</span>

    <span class="comment">// ä½¿ç”¨æµ®ç‚¹æ•°</span>
    fmt.<span class="function">Println</span>(<span class="function">Min</span>(<span class="number">3.14</span>, <span class="number">2.71</span>))  <span class="comment">// 2.71</span>

    <span class="comment">// ä½¿ç”¨å­—ç¬¦ä¸²</span>
    fmt.<span class="function">Println</span>(<span class="function">Min</span>(<span class="string">"apple"</span>, <span class="string">"banana"</span>))  <span class="comment">// apple</span>
}</code></pre>

            <h2 id="constraints">ç±»å‹çº¦æŸ</h2>
            <pre><code><span class="keyword">package</span> main

<span class="keyword">import</span> <span class="string">"fmt"</span>

<span class="comment">// è‡ªå®šä¹‰ç±»å‹çº¦æŸ</span>
<span class="keyword">type</span> Number <span class="keyword">interface</span> {
    <span class="keyword">int</span> | <span class="keyword">int64</span> | <span class="keyword">float64</span>
}

<span class="comment">// ~ è¡¨ç¤ºåº•å±‚ç±»å‹</span>
<span class="keyword">type</span> SignedNumber <span class="keyword">interface</span> {
    ~<span class="keyword">int</span> | ~<span class="keyword">int64</span> | ~<span class="keyword">int32</span>
}

<span class="function">func</span> <span class="function">Sum</span>[T Number](numbers []T) T {
    <span class="keyword">var</span> total T
    <span class="keyword">for</span> _, num := <span class="keyword">range</span> numbers {
        total += num
    }
    <span class="keyword">return</span> total
}

<span class="function">func</span> <span class="function">main</span>() {
    ints := []<span class="keyword">int</span>{<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>}
    floats := []<span class="keyword">float64</span>{<span class="number">1.1</span>, <span class="number">2.2</span>, <span class="number">3.3</span>}

    fmt.<span class="function">Println</span>(<span class="string">"æ•´æ•°å’Œ:"</span>, <span class="function">Sum</span>(ints))
    fmt.<span class="function">Println</span>(<span class="string">"æµ®ç‚¹æ•°å’Œ:"</span>, <span class="function">Sum</span>(floats))
}</code></pre>

            <h2 id="constraints">ç±»å‹çº¦æŸ</h2>
            <pre><code><span class="keyword">package</span> main

<span class="keyword">import</span> <span class="string">"fmt"</span>

<span class="comment">// è‡ªå®šä¹‰ç±»å‹çº¦æŸ</span>
<span class="keyword">type</span> Number <span class="keyword">interface</span> {
    <span class="keyword">int</span> | <span class="keyword">int64</span> | <span class="keyword">float64</span>
}

<span class="function">func</span> <span class="function">Sum</span>[T Number](numbers []T) T {
    <span class="keyword">var</span> total T
    <span class="keyword">for</span> _, num := <span class="keyword">range</span> numbers {
        total += num
    }
    <span class="keyword">return</span> total
}

<span class="function">func</span> <span class="function">main</span>() {
    ints := []<span class="keyword">int</span>{<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>}
    floats := []<span class="keyword">float64</span>{<span class="number">1.1</span>, <span class="number">2.2</span>, <span class="number">3.3</span>}

    fmt.<span class="function">Println</span>(<span class="string">"æ•´æ•°å’Œ:"</span>, <span class="function">Sum</span>(ints))
    fmt.<span class="function">Println</span>(<span class="string">"æµ®ç‚¹æ•°å’Œ:"</span>, <span class="function">Sum</span>(floats))
}</code></pre>

            <h2 id="types">æ³›å‹ç±»å‹</h2>
            <pre><code><span class="keyword">package</span> main

<span class="keyword">import</span> <span class="string">"fmt"</span>

<span class="comment">// æ³›å‹ç»“æ„ä½“</span>
<span class="keyword">type</span> Stack[T <span class="keyword">any</span>] <span class="keyword">struct</span> {
    items []T
}

<span class="function">func</span> (s *Stack[T]) <span class="function">Push</span>(item T) {
    s.items = <span class="function">append</span>(s.items, item)
}

<span class="function">func</span> (s *Stack[T]) <span class="function">Pop</span>() (T, <span class="keyword">bool</span>) {
    <span class="keyword">if</span> <span class="function">len</span>(s.items) == <span class="number">0</span> {
        <span class="keyword">var</span> zero T
        <span class="keyword">return</span> zero, <span class="keyword">false</span>
    }
    index := <span class="function">len</span>(s.items) - <span class="number">1</span>
    item := s.items[index]
    s.items = s.items[:index]
    <span class="keyword">return</span> item, <span class="keyword">true</span>
}

<span class="function">func</span> (s *Stack[T]) <span class="function">IsEmpty</span>() <span class="keyword">bool</span> {
    <span class="keyword">return</span> <span class="function">len</span>(s.items) == <span class="number">0</span>
}

<span class="function">func</span> <span class="function">main</span>() {
    <span class="comment">// æ•´æ•°æ ˆ</span>
    intStack := Stack[<span class="keyword">int</span>]{}
    intStack.<span class="function">Push</span>(<span class="number">1</span>)
    intStack.<span class="function">Push</span>(<span class="number">2</span>)
    intStack.<span class="function">Push</span>(<span class="number">3</span>)

    <span class="keyword">for</span> !intStack.<span class="function">IsEmpty</span>() {
        val, _ := intStack.<span class="function">Pop</span>()
        fmt.<span class="function">Println</span>(<span class="string">"å¼¹å‡º:"</span>, val)
    }

    <span class="comment">// å­—ç¬¦ä¸²æ ˆ</span>
    strStack := Stack[<span class="keyword">string</span>]{}
    strStack.<span class="function">Push</span>(<span class="string">"Hello"</span>)
    strStack.<span class="function">Push</span>(<span class="string">"World"</span>)

    <span class="keyword">for</span> !strStack.<span class="function">IsEmpty</span>() {
        val, _ := strStack.<span class="function">Pop</span>()
        fmt.<span class="function">Println</span>(<span class="string">"å¼¹å‡º:"</span>, val)
    }
}</code></pre>

            <h2 id="interfaces">æ³›å‹æ¥å£</h2>
            <pre><code><span class="keyword">package</span> main

<span class="keyword">import</span> <span class="string">"fmt"</span>

<span class="comment">// æ³›å‹æ¥å£</span>
<span class="keyword">type</span> Container[T <span class="keyword">any</span>] <span class="keyword">interface</span> {
    <span class="function">Add</span>(item T)
    <span class="function">Get</span>(index <span class="keyword">int</span>) T
    <span class="function">Size</span>() <span class="keyword">int</span>
}

<span class="keyword">type</span> List[T <span class="keyword">any</span>] <span class="keyword">struct</span> {
    items []T
}

<span class="function">func</span> (l *List[T]) <span class="function">Add</span>(item T) {
    l.items = <span class="function">append</span>(l.items, item)
}

<span class="function">func</span> (l *List[T]) <span class="function">Get</span>(index <span class="keyword">int</span>) T {
    <span class="keyword">return</span> l.items[index]
}

<span class="function">func</span> (l *List[T]) <span class="function">Size</span>() <span class="keyword">int</span> {
    <span class="keyword">return</span> <span class="function">len</span>(l.items)
}

<span class="function">func</span> <span class="function">PrintContainer</span>[T <span class="keyword">any</span>](c Container[T]) {
    <span class="keyword">for</span> i := <span class="number">0</span>; i < c.<span class="function">Size</span>(); i++ {
        fmt.<span class="function">Println</span>(c.<span class="function">Get</span>(i))
    }
}

<span class="function">func</span> <span class="function">main</span>() {
    list := List[<span class="keyword">int</span>]{}
    list.<span class="function">Add</span>(<span class="number">10</span>)
    list.<span class="function">Add</span>(<span class="number">20</span>)
    list.<span class="function">Add</span>(<span class="number">30</span>)

    <span class="function">PrintContainer</span>(&list)
}</code></pre>

            <h2 id="methods">æ³›å‹æ–¹æ³•</h2>
            <pre><code><span class="keyword">package</span> main

<span class="keyword">import</span> <span class="string">"fmt"</span>

<span class="keyword">type</span> Processor <span class="keyword">struct</span> {
    name <span class="keyword">string</span>
}

<span class="comment">// æ³›å‹æ–¹æ³•</span>
<span class="function">func</span> (p Processor) <span class="function">Process</span>[T <span class="keyword">any</span>](items []T, fn <span class="function">func</span>(T) T) []T {
    result := <span class="function">make</span>([]T, <span class="function">len</span>(items))
    <span class="keyword">for</span> i, item := <span class="keyword">range</span> items {
        result[i] = fn(item)
    }
    <span class="keyword">return</span> result
}

<span class="function">func</span> <span class="function">main</span>() {
    processor := Processor{name: <span class="string">"MyProcessor"</span>}

    <span class="comment">// å¤„ç†æ•´æ•°</span>
    numbers := []<span class="keyword">int</span>{<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>}
    doubled := processor.<span class="function">Process</span>(numbers, <span class="function">func</span>(n <span class="keyword">int</span>) <span class="keyword">int</span> {
        <span class="keyword">return</span> n * <span class="number">2</span>
    })
    fmt.<span class="function">Println</span>(<span class="string">"åŠ å€:"</span>, doubled)

    <span class="comment">// å¤„ç†å­—ç¬¦ä¸²</span>
    words := []<span class="keyword">string</span>{<span class="string">"hello"</span>, <span class="string">"world"</span>}
    upper := processor.<span class="function">Process</span>(words, <span class="function">func</span>(s <span class="keyword">string</span>) <span class="keyword">string</span> {
        <span class="keyword">return</span> s + <span class="string">"!"</span>
    })
    fmt.<span class="function">Println</span>(<span class="string">"æ·»åŠ æ„Ÿå¹å·:"</span>, upper)
}</code></pre>

            <h2 id="inference">ç±»å‹æ¨æ–­</h2>
            <pre><code><span class="keyword">package</span> main

<span class="keyword">import</span> <span class="string">"fmt"</span>

<span class="function">func</span> <span class="function">Print</span>[T <span class="keyword">any</span>](value T) {
    fmt.<span class="function">Println</span>(value)
}

<span class="function">func</span> <span class="function">main</span>() {
    <span class="comment">// ç±»å‹æ¨æ–­ï¼šç¼–è¯‘å™¨è‡ªåŠ¨æ¨æ–­ç±»å‹</span>
    <span class="function">Print</span>(<span class="number">42</span>)      <span class="comment">// T æ¨æ–­ä¸º int</span>
    <span class="function">Print</span>(<span class="string">"hello"</span>)  <span class="comment">// T æ¨æ–­ä¸º string</span>
    <span class="function">Print</span>(<span class="number">3.14</span>)     <span class="comment">// T æ¨æ–­ä¸º float64</span>

    <span class="comment">// æ˜¾å¼æŒ‡å®šç±»å‹</span>
    <span class="function">Print</span>[<span class="keyword">int</span>](<span class="number">100</span>)
}</code></pre>

            <h2 id="multiple">å¤šä¸ªç±»å‹å‚æ•°</h2>
            <pre><code><span class="keyword">package</span> main

<span class="keyword">import</span> <span class="string">"fmt"</span>

<span class="comment">// ä¸¤ä¸ªç±»å‹å‚æ•°</span>
<span class="function">func</span> <span class="function">Pair</span>[K, V <span class="keyword">any</span>](key K, value V) <span class="keyword">map</span>[K]V {
    <span class="keyword">return</span> <span class="keyword">map</span>[K]V{key: value}
}

<span class="comment">// ä¸‰ä¸ªç±»å‹å‚æ•°</span>
<span class="function">func</span> <span class="function">Transform</span>[T, U, V <span class="keyword">any</span>](t T, u U, fn <span class="function">func</span>(T, U) V) V {
    <span class="keyword">return</span> fn(t, u)
}

<span class="function">func</span> <span class="function">main</span>() {
    <span class="comment">// ä½¿ç”¨ Pair</span>
    m := <span class="function">Pair</span>(<span class="string">"name"</span>, <span class="string">"Go"</span>)
    fmt.<span class="function">Println</span>(m)

    <span class="comment">// ä½¿ç”¨ Transform</span>
    result := <span class="function">Transform</span>(<span class="number">10</span>, <span class="number">5</span>, <span class="function">func</span>(a, b <span class="keyword">int</span>) <span class="keyword">int</span> {
        <span class="keyword">return</span> a + b
    })
    fmt.<span class="function">Println</span>(<span class="string">"ç»“æœ:"</span>, result)
}</code></pre>

            <h2 id="tilde">Go 1.26 æ–°ç‰¹æ€§ï¼šè‡ªå¼•ç”¨æ³›å‹</h2>
            <div class="info-box">
                <h3>â­ Go 1.26 æ–°å¢ï¼šè‡ªå¼•ç”¨æ³›å‹</h3>
                <p>Go 1.26 è§£é™¤äº†æ³›å‹ç±»å‹ä¸èƒ½åœ¨å…¶è‡ªèº«ç±»å‹å‚æ•°åˆ—è¡¨ä¸­å¼•ç”¨è‡ªå·±çš„é™åˆ¶ã€‚è¿™ä½¿å¾—å®ç°å¤æ‚çš„é€’å½’æ•°æ®ç»“æ„æˆä¸ºå¯èƒ½ã€‚</p>
            </div>
            <pre><code><span class="keyword">package</span> main

<span class="keyword">import</span> <span class="string">"fmt"</span>

<span class="comment">// Go 1.26: è‡ªå¼•ç”¨æ³›å‹ - é€’å½’çº¦æŸ</span>
<span class="comment">// Adder ç±»å‹çº¦æŸè¦æ±‚ A å¿…é¡»å®ç° Add(A) A æ–¹æ³•</span>
<span class="keyword">type</span> Adder[A Adder[A]] <span class="keyword">interface</span> {
    <span class="function">Add</span>(A) A
}

<span class="keyword">type</span> MyInt <span class="keyword">int</span>

<span class="keyword">func</span> (m MyInt) <span class="function">Add</span>(other MyInt) MyInt {
    <span class="keyword">return</span> m + other
}

<span class="keyword">func</span> <span class="function">sum</span>[A Adder[A]](x, y A) A {
    <span class="keyword">return</span> x.<span class="function">Add</span>(y)
}

<span class="function">func</span> <span class="function">main</span>() {
    x, y := MyInt(<span class="number">10</span>), MyInt(<span class="number">20</span>)
    fmt.<span class="function">Println</span>(<span class="string">"Sum:"</span>, <span class="function">sum</span>(x, y))  <span class="comment">// 30</span>
}</code></pre>

            <h2 id="new">Go 1.26 æ–°ç‰¹æ€§ï¼šnew() è¡¨è¾¾å¼å¢å¼º</h2>
            <div class="success-box">
                <h3>â­ Go 1.26: new() å‡½æ•°å¢å¼º</h3>
                <p>new() å‡½æ•°ç°åœ¨å¯ä»¥æ¥å—è¡¨è¾¾å¼ä½œä¸ºåˆå§‹å€¼ï¼Œç®€åŒ–äº†ä»£ç ã€‚</p>
            </div>
            <pre><code><span class="keyword">package</span> main

<span class="keyword">import</span> <span class="string">"encoding/json"</span>

<span class="keyword">type</span> Config <span class="keyword">struct</span> {
    MaxRetries *<span class="keyword">int</span>  <span class="string">`json:"max_retries,omitempty"`</span>
    Timeout    *<span class="keyword">int</span>     <span class="string">`json:"timeout,omitempty"`</span>
}

<span class="comment">// Go 1.26 ä¹‹å‰çš„å†™æ³•</span>
<span class="keyword">func</span> <span class="function">oldWay</span>() Config {
    n := <span class="number">3</span>
    t := <span class="number">30</span>
    <span class="keyword">return</span> Config{
        MaxRetries: &n,
        Timeout:    &t,
    }
}

<span class="comment">// Go 1.26: ç®€åŒ–å†™æ³•</span>
<span class="keyword">func</span> <span class="function">newWay</span>() Config {
    <span class="keyword">return</span> Config{
        MaxRetries: <span class="function">new</span>(<span class="number">3</span>),   <span class="comment">// ç›´æ¥ new(è¡¨è¾¾å¼)</span>
        Timeout:    <span class="function">new</span>(<span class="number">30</span>),
    }
}

<span class="function">func</span> <span class="function">main</span>() {
    c := <span class="function">newWay</span>()
    jsonBytes, _ := json.<span class="function">Marshal</span>(c)
    fmt.<span class="function">Println</span>(<span class="string">string</span>(jsonBytes))
}</code></pre>

            <h2 id="bestpractices">æ³›å‹æœ€ä½³å®è·µ</h2>

            <div class="note-box">
                <h3>ä½•æ—¶ä½¿ç”¨æ³›å‹</h3>
                <ul>
                    <li>å½“éœ€è¦ä¸ºå¤šç§ç±»å‹å®ç°ç›¸åŒé€»è¾‘æ—¶</li>
                    <li>å½“ç±»å‹å®‰å…¨æ¯”ä»£ç ç®€æ´æ›´é‡è¦æ—¶</li>
                    <li>å½“éœ€è¦æ„å»ºé€šç”¨æ•°æ®ç»“æ„æ—¶ï¼ˆå¦‚æ ˆã€é˜Ÿåˆ—ã€æ ‘ç­‰ï¼‰</li>
                </ul>
            </div>

            <div class="example-box">
                <h3>ä½•æ—¶ä¸ä½¿ç”¨æ³›å‹</h3>
                <ul>
                    <li>å½“åªéœ€è¦å¤„ç†ä¸€ç§ç‰¹å®šç±»å‹æ—¶</li>
                    <li>å½“ä½¿ç”¨æ¥å£æ›´ç®€å•æ—¶</li>
                    <li>å½“æ³›å‹ä¼šè®©ä»£ç æ›´éš¾ç†è§£æ—¶</li>
                </ul>
            </div>

            <h2 id="example">å®é™…åº”ç”¨ç¤ºä¾‹ï¼šæ³›å‹ç¼“å­˜</h2>
            <pre><code><span class="keyword">package</span> main

<span class="keyword">import</span> (
    <span class="string">"fmt"</span>
    <span class="string">"sync"</span>
    <span class="string">"time"</span>
)

<span class="keyword">type</span> CacheItem[T <span class="keyword">any</span>] <span class="keyword">struct</span> {
    value      T
    expiration time.Time
}

<span class="keyword">type</span> Cache[K <span class="keyword">comparable</span>, V <span class="keyword">any</span>] <span class="keyword">struct</span> {
    items <span class="keyword">map</span>[K]CacheItem[V]
    mu    sync.RWMutex
}

<span class="function">func</span> <span class="function">NewCache</span>[K <span class="keyword">comparable</span>, V <span class="keyword">any</span>() *Cache[K, V] {
    <span class="keyword">return</span> &Cache[K, V]{
        items: <span class="function">make</span>(<span class="keyword">map</span>[K]CacheItem[V]),
    }
}

<span class="function">func</span> (c *Cache[K, V]) <span class="function">Set</span>(key K, value V, ttl time.Duration) {
    c.mu.<span class="function">Lock</span>()
    <span class="keyword">defer</span> c.mu.<span class="function">Unlock</span>()

    c.items[key] = CacheItem[V]{
        value:      value,
        expiration: time.<span class="function">Now</span>().<span class="function">Add</span>(ttl),
    }
}

<span class="function">func</span> (c *Cache[K, V]) <span class="function">Get</span>(key K) (V, <span class="keyword">bool</span>) {
    c.mu.<span class="function">RLock</span>()
    <span class="keyword">defer</span> c.mu.<span class="function">RUnlock</span>()

    item, exists := c.items[key]
    <span class="keyword">if</span> !exists || time.<span class="function">Now</span>().<span class="function">After</span>(item.expiration) {
        <span class="keyword">var</span> zero V
        <span class="keyword">return</span> zero, <span class="keyword">false</span>
    }
    <span class="keyword">return</span> item.value, <span class="keyword">true</span>
}

<span class="function">func</span> <span class="function">main</span>() {
    <span class="comment">// å­—ç¬¦ä¸²ç¼“å­˜</span>
    stringCache := <span class="function">NewCache</span>[<span class="keyword">string</span>, <span class="keyword">string</span>]()
    stringCache.<span class="function">Set</span>(<span class="string">"key1"</span>, <span class="string">"value1"</span>, <span class="number">10</span>*time.Second)
    val, ok := stringCache.<span class="function">Get</span>(<span class="string">"key1"</span>)
    fmt.<span class="function">Println</span>(<span class="string">"å­—ç¬¦ä¸²ç¼“å­˜:"</span>, val, ok)

    <span class="comment">// æ•´æ•°ç¼“å­˜</span>
    intCache := <span class="function">NewCache</span>[<span class="keyword">string</span>, <span class="keyword">int</span>]()
    intCache.<span class="function">Set</span>(<span class="string">"counter"</span>, <span class="number">42</span>, <span class="number">10</span>*time.Second)
    count, ok := intCache.<span class="function">Get</span>(<span class="string">"counter"</span>)
    fmt.<span class="function">Println</span>(<span class="string">"æ•´æ•°ç¼“å­˜:"</span>, count, ok)
}</code></pre>
        </div>
    </div>
<script src="code-collapse.js"></script>

</body>
    <script src="navigation.js"></script>
</html>