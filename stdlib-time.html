<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>time 时间处理 - Go 学习教程</title>
    <link rel="stylesheet" href="styles.css?v=1.3">
    </head>
<body>
    <div class="container">
        <aside class="sidebar">
        <!-- 导航栏将通过JavaScript动态加载 -->
    </aside>
                <div class="content">
            <a href="stdlib.html" class="back-link">← 返回 stdlib</a>
            <h2 id="time">time 时间处理</h2>

            <h3>获取当前时间</h3>
            <pre><code><span class="keyword">package</span> main

<span class="keyword">import</span> (
    <span class="string">"fmt"</span>
    <span class="string">"time"</span>
)

<span class="function">func</span> <span class="function">main</span>() {
    <span class="comment">// 获取当前时间</span>
    now := time.<span class="function">Now</span>()
    fmt.<span class="function">Println</span>(<span class="string">"Current time:"</span>, now)
    
    <span class="comment">// 获取 UTC 时间</span>
    utc := time.<span class="function">Now</span>().<span class="function">UTC</span>()
    fmt.<span class="function">Println</span>(<span class="string">"UTC time:"</span>, utc)
}</code></pre>

            <h3>时间格式化</h3>
            <pre><code><span class="keyword">package</span> main

<span class="keyword">import</span> (
    <span class="string">"fmt"</span>
    <span class="string">"time"</span>
)

<span class="function">func</span> <span class="function">main</span>() {
    now := time.<span class="function">Now</span>()
    
    <span class="comment">// 使用预定义格式</span>
    fmt.<span class="function">Println</span>(<span class="string">"RFC3339:"</span>, now.<span class="function">Format</span>(time.RFC3339))
    fmt.<span class="function">Println</span>(<span class="string">"RFC1123:"</span>, now.<span class="function">Format</span>(time.RFC1123))
    
    <span class="comment">// 自定义格式（参考 2006-01-02 15:04:05）</span>
    fmt.<span class="function">Println</span>(<span class="string">"Custom:"</span>, now.<span class="function">Format</span>(<span class="string">"2006-01-02 15:04:05"</span>))
    fmt.<span class="function">Println</span>(<span class="string">"Date only:"</span>, now.<span class="function">Format</span>(<span class="string">"2006-01-02"</span>))
    fmt.<span class="function">Println</span>(<span class="string">"Time only:"</span>, now.<span class="function">Format</span>(<span class="string">"15:04:05"</span>))
}</code></pre>

            <h3>时间解析</h3>
            <pre><code><span class="keyword">package</span> main

<span class="keyword">import</span> (
    <span class="string">"fmt"</span>
    <span class="string">"time"</span>
)

<span class="function">func</span> <span class="function">main</span>() {
    <span class="comment">// 解析时间字符串</span>
    timeStr := <span class="string">"2024-01-26 15:30:45"</span>
    parsedTime, err := time.<span class="function">Parse</span>(<span class="string">"2006-01-02 15:04:05"</span>, timeStr)
    <span class="keyword">if</span> err != <span class="keyword">nil</span> {
        fmt.<span class="function">Println</span>(<span class="string">"Error:"</span>, err)
        <span class="keyword">return</span>
    }
    fmt.<span class="function">Println</span>(<span class="string">"Parsed time:"</span>, parsedTime)
    
    <span class="comment">// 解析 RFC3339 格式</span>
    rfcTime, err := time.<span class="function">Parse</span>(time.RFC3339, <span class="string">"2024-01-26T15:30:45Z"</span>)
    <span class="keyword">if</span> err != <span class="keyword">nil</span> {
        fmt.<span class="function">Println</span>(<span class="string">"Error:"</span>, err)
        <span class="keyword">return</span>
    }
    fmt.<span class="function">Println</span>(<span class="string">"RFC3339 time:"</span>, rfcTime)
}</code></pre>

            <h3>时间计算</h3>
            <pre><code><span class="keyword">package</span> main

<span class="keyword">import</span> (
    <span class="string">"fmt"</span>
    <span class="string">"time"</span>
)

<span class="function">func</span> <span class="function">main</span>() {
    now := time.<span class="function">Now</span>()
    
    <span class="comment">// 添加时间</span>
    future := now.<span class="function">Add</span>(<span class="number">24</span> * time.Hour)
    fmt.<span class="function">Println</span>(<span class="string">"24 hours later:"</span>, future)
    
    <span class="comment">// 减去时间</span>
    past := now.<span class="function">Add</span>(-<span class="number">24</span> * time.Hour)
    fmt.<span class="function">Println</span>(<span class="string">"24 hours ago:"</span>, past)
    
    <span class="comment">// 计算时间差</span>
    duration := future.<span class="function">Sub</span>(now)
    fmt.<span class="function">Println</span>(<span class="string">"Duration:"</span>, duration)
    fmt.<span class="function">Println</span>(<span class="string">"Hours:"</span>, duration.<span class="function">Hours</span>())
    fmt.<span class="function">Println</span>(<span class="string">"Minutes:"</span>, duration.<span class="function">Minutes</span>())
    
    <span class="comment">// 计算两个时间之间的天数</span>
    days := duration.<span class="function">Hours</span>() / <span class="number">24</span>
    fmt.<span class="function">Println</span>(<span class="string">"Days:"</span>, days)
}</code></pre>

            <h3>定时器和 Ticker</h3>
            <pre><code><span class="keyword">package</span> main

<span class="keyword">import</span> (
    <span class="string">"fmt"</span>
    <span class="string">"time"</span>
)

<span class="function">func</span> <span class="function">main</span>() {
    <span class="comment">// Timer：一次性定时器</span>
    timer := time.<span class="function">NewTimer</span>(<span class="number">2</span> * time.Second)
    <-timer.C
    fmt.<span class="function">Println</span>(<span class="string">"Timer expired"</span>)
    
    <span class="comment">// Ticker：周期性定时器</span>
    ticker := time.<span class="function">NewTicker</span>(<span class="number">1</span> * time.Second)
    <span class="keyword">defer</span> ticker.<span class="function">Stop</span>()
    
    <span class="keyword">for</span> i := <span class="number">0</span>; i < <span class="number">3</span>; i++ {
        <-ticker.C
        fmt.<span class="function">Printf</span>(<span class="string">"Tick %d\n"</span>, i)
    }
}</code></pre>

            <h3>时区处理</h3>
            <pre><code><span class="keyword">package</span> main

<span class="keyword">import</span> (
    <span class="string">"fmt"</span>
    <span class="string">"time"</span>
)

<span class="function">func</span> <span class="function">main</span>() {
    <span class="comment">// 加载时区</span>
    loc, err := time.<span class="function">LoadLocation</span>(<span class="string">"Asia/Shanghai"</span>)
    <span class="keyword">if</span> err != <span class="keyword">nil</span> {
        fmt.<span class="function">Println</span>(<span class="string">"Error:"</span>, err)
        <span class="keyword">return</span>
    }
    
    <span class="comment">// 在指定时区创建时间</span>
    now := time.<span class="function">Now</span>().<span class="function">In</span>(loc)
    fmt.<span class="function">Println</span>(<span class="string">"Shanghai time:"</span>, now)
    
    <span class="comment">// 转换时区</span>
    nyLoc, _ := time.<span class="function">LoadLocation</span>(<span class="string">"America/New_York"</span>)
    nyTime := now.<span class="function">In</span>(nyLoc)
    fmt.<span class="function">Println</span>(<span class="string">"New York time:"</span>, nyTime)
}</code></pre>

            
        </div>
    </div>
<script src="code-collapse.js"></script>

</body>
    <script src="navigation.js"></script>
</html>