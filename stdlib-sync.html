<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>sync å¹¶å‘åŸè¯­ - Go å­¦ä¹ æ•™ç¨‹</title>
    <link rel="stylesheet" href="styles.css?v=1.4">
    </head>
<body>
    <div class="container">
        <aside class="sidebar">
        <!-- å¯¼èˆªæ å°†é€šè¿‡JavaScriptåŠ¨æ€åŠ è½½ -->
    </aside>
                <div class="content">
            <a href="stdlib.html" class="back-link">â† è¿”å› stdlib</a>
            <h2 id="sync">sync å¹¶å‘åŸè¯­</h2>

            <h3>Mutex äº’æ–¥é”</h3>
            <pre><code><span class="keyword">package</span> main

<span class="keyword">import</span> (
    <span class="string">"fmt"</span>
    <span class="string">"sync"</span>
)

<span class="keyword">type</span> Counter <span class="keyword">struct</span> {
    mu    sync.Mutex
    value <span class="keyword">int</span>
}

<span class="function">func</span> (c *Counter) <span class="function">Increment</span>() {
    c.mu.<span class="function">Lock</span>()
    <span class="keyword">defer</span> c.mu.<span class="function">Unlock</span>()
    c.value++
}

<span class="function">func</span> (c *Counter) <span class="function">Value</span>() <span class="keyword">int</span> {
    c.mu.<span class="function">Lock</span>()
    <span class="keyword">defer</span> c.mu.<span class="function">Unlock</span>()
    <span class="keyword">return</span> c.value
}

<span class="function">func</span> <span class="function">main</span>() {
    <span class="keyword">var</span> counter Counter
    <span class="keyword">var</span> wg sync.WaitGroup
    
    <span class="keyword">for</span> i := <span class="number">0</span>; i < <span class="number">1000</span>; i++ {
        wg.<span class="function">Add</span>(<span class="number">1</span>)
        <span class="keyword">go</span> <span class="keyword">func</span>() {
            <span class="keyword">defer</span> wg.<span class="function">Done</span>()
            counter.<span class="function">Increment</span>()
        }()
    }
    
    wg.<span class="function">Wait</span>()
    fmt.<span class="function">Println</span>(<span class="string">"Final value:"</span>, counter.<span class="function">Value</span>())
}</code></pre>

            <h3>RWMutex è¯»å†™é”</h3>
            <pre><code><span class="keyword">package</span> main

<span class="keyword">import</span> (
    <span class="string">"fmt"</span>
    <span class="string">"sync"</span>
    <span class="string">"time"</span>
)

<span class="keyword">type</span> Cache <span class="keyword">struct</span> {
    mu    sync.RWMutex
    data  <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">string</span>
}

<span class="function">func</span> <span class="function">NewCache</span>() *Cache {
    <span class="keyword">return</span> &Cache{
        data: <span class="function">make</span>(<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">string</span>),
    }
}

<span class="function">func</span> (c *Cache) <span class="function">Get</span>(key <span class="keyword">string</span>) (<span class="keyword">string</span>, <span class="keyword">bool</span>) {
    c.mu.<span class="function">RLock</span>()
    <span class="keyword">defer</span> c.mu.<span class="function">RUnlock</span>()
    val, ok := c.data[key]
    <span class="keyword">return</span> val, ok
}

<span class="function">func</span> (c *Cache) <span class="function">Set</span>(key, value <span class="keyword">string</span>) {
    c.mu.<span class="function">Lock</span>()
    <span class="keyword">defer</span> c.mu.<span class="function">Unlock</span>()
    c.data[key] = value
}

<span class="function">func</span> <span class="function">main</span>() {
    cache := <span class="function">NewCache</span>()
    <span class="keyword">var</span> wg sync.WaitGroup
    
    <span class="comment">// å†™å…¥</span>
    <span class="keyword">for</span> i := <span class="number">0</span>; i < <span class="number">10</span>; i++ {
        wg.<span class="function">Add</span>(<span class="number">1</span>)
        <span class="keyword">go</span> <span class="keyword">func</span>(i <span class="keyword">int</span>) {
            <span class="keyword">defer</span> wg.<span class="function">Done</span>()
            key := fmt.<span class="function">Sprintf</span>(<span class="string">"key%d"</span>, i)
            value := fmt.<span class="function">Sprintf</span>(<span class="string">"value%d"</span>, i)
            cache.<span class="function">Set</span>(key, value)
        }(i)
    }
    
    <span class="comment">// è¯»å–</span>
    <span class="keyword">for</span> i := <span class="number">0</span>; i < <span class="number">10</span>; i++ {
        wg.<span class="function">Add</span>(<span class="number">1</span>)
        <span class="keyword">go</span> <span class="keyword">func</span>(i <span class="keyword">int</span>) {
            <span class="keyword">defer</span> wg.<span class="function">Done</span>()
            key := fmt.<span class="function">Sprintf</span>(<span class="string">"key%d"</span>, i)
            time.<span class="function">Sleep</span>(time.Millisecond)
            val, ok := cache.<span class="function">Get</span>(key)
            fmt.<span class="function">Printf</span>(<span class="string">"Get %s: %v, %v\n"</span>, key, val, ok)
        }(i)
    }
    
    wg.<span class="function">Wait</span>()
}</code></pre>

            <h3>WaitGroup ç­‰å¾…ç»„</h3>
            <pre><code><span class="keyword">package</span> main

<span class="keyword">import</span> (
    <span class="string">"fmt"</span>
    <span class="string">"sync"</span>
)

<span class="function">func</span> <span class="function">worker</span>(id <span class="keyword">int</span>, wg *sync.WaitGroup) {
    <span class="keyword">defer</span> wg.<span class="function">Done</span>()
    fmt.<span class="function">Printf</span>(<span class="string">"Worker %d started\n"</span>, id)
    fmt.<span class="function">Printf</span>(<span class="string">"Worker %d finished\n"</span>, id)
}

<span class="function">func</span> <span class="function">main</span>() {
    <span class="keyword">var</span> wg sync.WaitGroup
    
    <span class="keyword">for</span> i := <span class="number">1</span>; i <= <span class="number">5</span>; i++ {
        wg.<span class="function">Add</span>(<span class="number">1</span>)
        <span class="keyword">go</span> <span class="function">worker</span>(i, &wg)
    }
    
    wg.<span class="function">Wait</span>()
    fmt.<span class="function">Println</span>(<span class="string">"All workers finished"</span>)
}</code></pre>

            <h3>Once å•æ¬¡æ‰§è¡Œ</h3>
            <pre><code><span class="keyword">package</span> main

<span class="keyword">import</span> (
    <span class="string">"fmt"</span>
    <span class="string">"sync"</span>
)

<span class="keyword">var</span> (
    once     sync.Once
    instance *Singleton
)

<span class="keyword">type</span> Singleton <span class="keyword">struct</span> {
    value <span class="keyword">string</span>
}

<span class="function">func</span> <span class="function">GetInstance</span>() *Singleton {
    once.<span class="function">Do</span>(<span class="keyword">func</span>() {
        instance = &Singleton{value: <span class="string">"initialized"</span>}
        fmt.<span class="function">Println</span>(<span class="string">"Singleton initialized"</span>)
    })
    <span class="keyword">return</span> instance
}

<span class="function">func</span> <span class="function">main</span>() {
    <span class="comment">// å¤šæ¬¡è°ƒç”¨åªä¼šåˆå§‹åŒ–ä¸€æ¬¡</span>
    <span class="function">GetInstance</span>()
    <span class="function">GetInstance</span>()
    <span class="function">GetInstance</span>()
}</code></pre>

            <h3>Cond æ¡ä»¶å˜é‡</h3>
            <pre><code><span class="keyword">package</span> main

<span class="keyword">import</span> (
    <span class="string">"fmt"</span>
    <span class="string">"sync"</span>
    <span class="string">"time"</span>
)

<span class="function">func</span> <span class="function">main</span>() {
    <span class="keyword">var</span> mu sync.Mutex
    cond := sync.<span class="function">NewCond</span>(&mu)
    ready := <span class="keyword">false</span>
    
    <span class="comment">// ç­‰å¾…è€…</span>
    <span class="keyword">go</span> <span class="keyword">func</span>() {
        mu.<span class="function">Lock</span>()
        <span class="keyword">for</span> !ready {
            fmt.<span class="function">Println</span>(<span class="string">"Waiting..."</span>)
            cond.<span class="function">Wait</span>()
        }
        fmt.<span class="function">Println</span>(<span class="string">"Ready!"</span>)
        mu.<span class="function">Unlock</span>()
    }()
    
    time.<span class="function">Sleep</span>(time.Second)
    
    <span class="comment">// é€šçŸ¥è€…</span>
    mu.<span class="function">Lock</span>()
    ready = <span class="keyword">true</span>
    fmt.<span class="function">Println</span>(<span class="string">"Signaling..."</span>)
    cond.<span class="function">Signal</span>()
    mu.<span class="function">Unlock</span>()
    
    time.<span class="function">Sleep</span>(time.Second)
}</code></pre>

            <h3>Pool å¯¹è±¡æ± </h3>
            <pre><code><span class="keyword">package</span> main

<span class="keyword">import</span> (
    <span class="string">"bytes"</span>
    <span class="string">"fmt"</span>
    <span class="string">"sync"</span>
)

<span class="keyword">var</span> bufferPool = sync.<span class="function">Pool</span>{
    New: <span class="keyword">func</span>() <span class="keyword">interface</span>{} {
        fmt.<span class="function">Println</span>(<span class="string">"Creating new buffer"</span>)
        <span class="keyword">return</span> &bytes.Buffer{}
    },
}

<span class="function">func</span> <span class="function">process</span>() {
    <span class="comment">// ä»æ± ä¸­è·å–</span>
    buf := bufferPool.<span class="function">Get</span>().(*bytes.Buffer)
    <span class="keyword">defer</span> <span class="keyword">func</span>() {
        <span class="comment">// é‡ç½®å¹¶æ”¾å›æ± ä¸­</span>
        buf.<span class="function">Reset</span>()
        bufferPool.<span class="function">Put</span>(buf)
    }()
    
    buf.<span class="function">WriteString</span>(<span class="string">"Hello, World!"</span>)
    fmt.<span class="function">Println</span>(<span class="string">"Buffer:"</span>, buf.<span class="function">String</span>())
}

<span class="function">func</span> <span class="function">main</span>() {
    <span class="keyword">for</span> i := <span class="number">0</span>; i < <span class="number">5</span>; i++ {
        <span class="function">process</span>()
    }
}</code></pre>

            <h3>Map å¹¶å‘å®‰å…¨æ˜ å°„</h3>
            <pre><code><span class="keyword">package</span> main

<span class="keyword">import</span> (
    <span class="string">"fmt"</span>
    <span class="string">"sync"</span>
)

<span class="function">func</span> <span class="function">main</span>() {
    <span class="keyword">var</span> m sync.Map
    
    <span class="comment">// å­˜å‚¨</span>
    m.<span class="function">Store</span>(<span class="string">"key1"</span>, <span class="string">"value1"</span>)
    m.<span class="function">Store</span>(<span class="string">"key2"</span>, <span class="string">"value2"</span>)
    
    <span class="comment">// åŠ è½½</span>
    <span class="keyword">if</span> val, ok := m.<span class="function">Load</span>(<span class="string">"key1"</span>); ok {
        fmt.<span class="function">Println</span>(<span class="string">"key1:"</span>, val)
    }
    
    <span class="comment">// åŠ è½½æˆ–å­˜å‚¨</span>
    actual, loaded := m.<span class="function">LoadOrStore</span>(<span class="string">"key3"</span>, <span class="string">"value3"</span>)
    fmt.<span class="function">Printf</span>(<span class="string">"key3: %v, loaded: %v\n"</span>, actual, loaded)
    
    <span class="comment">// éå†</span>
    m.<span class="function">Range</span>(<span class="keyword">func</span>(key, value <span class="keyword">interface</span>{}) <span class="keyword">bool</span> {
        fmt.<span class="function">Printf</span>(<span class="string">"%s: %s\n"</span>, key, value)
        <span class="keyword">return</span> <span class="keyword">true</span>
    })
    
    <span class="comment">// åˆ é™¤</span>
    m.<span class="function">Delete</span>(<span class="string">"key1"</span>)
}</code></pre>

            <h3>Atomic åŸå­æ“ä½œ</h3>
            <pre><code><span class="keyword">package</span> main

<span class="keyword">import</span> (
    <span class="string">"fmt"</span>
    <span class="string">"sync/atomic"</span>
)

<span class="function">func</span> <span class="function">main</span>() {
    <span class="keyword">var</span> counter int64
    
    <span class="comment">// åŸå­å¢åŠ </span>
    atomic.<span class="function">AddInt64</span>(&counter, <span class="number">1</span>)
    fmt.<span class="function">Println</span>(<span class="string">"Counter:"</span>, counter)
    
    <span class="comment">// åŸå­åŠ è½½</span>
    value := atomic.<span class="function">LoadInt64</span>(&counter)
    fmt.<span class="function">Println</span>(<span class="string">"Loaded:"</span>, value)
    
    <span class="comment">// åŸå­å­˜å‚¨</span>
    atomic.<span class="function">StoreInt64</span>(&counter, <span class="number">100</span>)
    fmt.<span class="function">Println</span>(<span class="string">"Stored:"</span>, atomic.<span class="function">LoadInt64</span>(&counter))
    
    <span class="comment">// åŸå­æ¯”è¾ƒå¹¶äº¤æ¢</span>
    swapped := atomic.<span class="function">CompareAndSwapInt64</span>(&counter, <span class="number">100</span>, <span class="number">200</span>)
    fmt.<span class="function">Printf</span>(<span class="string">"Swapped: %v, Value: %d\n"</span>, swapped, atomic.<span class="function">LoadInt64</span>(&counter))
}</code></pre>

            <h3>noCopy ç¦æ­¢å¤åˆ¶</h3>
            <p><code>noCopy</code> æ˜¯ sync åŒ…ä¸­çš„ä¸€ä¸ªé‡è¦æœºåˆ¶ï¼Œç”¨äºé˜²æ­¢å¹¶å‘ç±»å‹è¢«æ„å¤–å¤åˆ¶ã€‚</p>
            
            <div class="warning-box">
                <h3>âš ï¸ ä¸ºä»€ä¹ˆéœ€è¦ noCopyï¼Ÿ</h3>
                <ul>
                    <li><strong>çŠ¶æ€ä¸€è‡´æ€§</strong>ï¼šsync åŒ…ä¸­çš„ç±»å‹ï¼ˆå¦‚ Mutexã€WaitGroupï¼‰åŒ…å«å†…éƒ¨çŠ¶æ€ï¼Œå¤åˆ¶ä¼šå¯¼è‡´çŠ¶æ€ä¸ä¸€è‡´</li>
                    <li><strong>æ­»é”é£é™©</strong>ï¼šå¤åˆ¶çš„é”å¯èƒ½å¯¼è‡´æ­»é”æˆ–ä¸å¯é¢„æœŸçš„è¡Œä¸º</li>
                    <li><strong>å†…å­˜å®‰å…¨</strong>ï¼šå¤åˆ¶å¯èƒ½å¯¼è‡´å†…å­˜æ³„æ¼æˆ–ç«äº‰æ¡ä»¶</li>
                    <li><strong>API å¥‘çº¦</strong>ï¼šsync ç±»å‹åº”è¯¥é€šè¿‡æŒ‡é’ˆä¼ é€’ï¼Œè€Œä¸æ˜¯å€¼ä¼ é€’</li>
                </ul>
            </div>

            <pre><code><span class="comment">// noCopy çš„å®šä¹‰ï¼ˆåœ¨ sync åŒ…ä¸­ï¼‰</span>
<span class="keyword">type</span> noCopy <span class="keyword">struct</span>{}

<span class="comment">// Mutex çš„å®šä¹‰ï¼ˆåµŒå…¥äº† noCopyï¼‰</span>
<span class="keyword">type</span> Mutex <span class="keyword">struct</span> {
    state int32
    sema  uint32
    noCopy noCopy  <span class="comment">// åµŒå…¥ noCopyï¼Œé˜²æ­¢å¤åˆ¶</span>
}</code></pre>

            <h4>é”™è¯¯çš„å¤åˆ¶ç¤ºä¾‹</h4>
            <pre><code><span class="keyword">package</span> main

<span class="keyword">import</span> (
    <span class="string">"fmt"</span>
    <span class="string">"sync"</span>
)

<span class="keyword">type</span> SafeCounter <span class="keyword">struct</span> {
    mu    sync.Mutex
    value <span class="keyword">int</span>
}

<span class="comment">// âŒ é”™è¯¯ï¼šé€šè¿‡å€¼å¤åˆ¶äº† Mutex</span>
<span class="keyword">func</span> <span class="function">badCopyExample</span>() {
    counter := SafeCounter{
        value: <span class="number">0</span>,
    }
    
    <span class="comment">// é”™è¯¯ï¼šå¤åˆ¶äº†æ•´ä¸ªç»“æ„ä½“ï¼ˆåŒ…æ‹¬ Mutexï¼‰</span>
    counterCopy := counter  <span class="comment">// è¿™ä¼šå¤åˆ¶ Mutexï¼</span>
    
    counterCopy.mu.<span class="function">Lock</span>()
    counterCopy.value++
    counterCopy.mu.<span class="function">Unlock</span>()
    
    <span class="comment">// åŸå§‹ counter çš„çŠ¶æ€æ˜¯ç‹¬ç«‹çš„</span>
    fmt.<span class="function">Printf</span>(<span class="string">"Original: %d, Copy: %d\n"</span>, counter.value, counterCopy.value)
}

<span class="comment">// âœ… æ­£ç¡®ï¼šä½¿ç”¨æŒ‡é’ˆä¼ é€’</span>
<span class="keyword">func</span> <span class="function">correctPointerExample</span>() {
    counter := &SafeCounter{
        value: <span class="number">0</span>,
    }
    
    <span class="comment">// æ­£ç¡®ï¼šä¼ é€’æŒ‡é’ˆ</span>
    <span class="function">incrementCounter</span>(counter)
}

<span class="function">func</span> <span class="function">incrementCounter</span>(c *SafeCounter) {
    c.mu.<span class="function">Lock</span>()
    <span class="keyword">defer</span> c.mu.<span class="function">Unlock</span>()
    c.value++
}

<span class="function">func</span> <span class="function">main</span>() {
    fmt.<span class="function">Println</span>(<span class="string">"è¿è¡Œ badCopyExample..."</span>)
    <span class="function">badCopyExample</span>()
    
    fmt.<span class="function">Println</span>(<span class="string">"\nè¿è¡Œ correctPointerExample..."</span>)
    <span class="function">correctPointerExample</span>()
}</code></pre>

            <h4>ä½¿ç”¨ go vet æ£€æµ‹å¤åˆ¶</h4>
            <pre><code><span class="keyword">package</span> main

<span class="keyword">import</span> (
    <span class="string">"fmt"</span>
    <span class="string">"sync"</span>
)

<span class="keyword">type</span> Resource <span class="keyword">struct</span> {
    mu sync.Mutex
    data <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">int</span>
}

<span class="comment">// âŒ é”™è¯¯ï¼šå‡½æ•°å‚æ•°ä½¿ç”¨å€¼ä¼ é€’</span>
<span class="comment">// go vet ä¼šæ£€æµ‹åˆ°è¿™ä¸ªé—®é¢˜</span>
<span class="keyword">func</span> <span class="function">processResource</span>(r Resource) {  <span class="comment">// é”™è¯¯ï¼šå¤åˆ¶äº† Mutex</span>
    r.mu.<span class="function">Lock</span>()
    <span class="keyword">defer</span> r.mu.<span class="function">Unlock</span>()
    r.data[<span class="string">"key"</span>] = <span class="number">42</span>
}

<span class="comment">// âœ… æ­£ç¡®ï¼šå‡½æ•°å‚æ•°ä½¿ç”¨æŒ‡é’ˆä¼ é€’</span>
<span class="keyword">func</span> <span class="function">processResourceSafe</span>(r *Resource) {  <span class="comment">// æ­£ç¡®ï¼šä½¿ç”¨æŒ‡é’ˆ</span>
    r.mu.<span class="function">Lock</span>()
    <span class="keyword">defer</span> r.mu.<span class="function">Unlock</span>()
    r.data[<span class="string">"key"</span>] = <span class="number">42</span>
}

<span class="function">func</span> <span class="function">main</span>() {
    resource := &Resource{
        data: <span class="function">make</span>(<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">int</span>),
    }
    
    <span class="comment">// ä½¿ç”¨ go vet æ£€æµ‹å¤åˆ¶é—®é¢˜</span>
    <span class="comment">// è¿è¡Œå‘½ä»¤ï¼šgo vet main.go</span>
    
    fmt.<span class="function">Println</span>(<span class="string">"ä½¿ç”¨ go vet æ£€æµ‹å¤åˆ¶é—®é¢˜..."</span>)
    fmt.<span class="function">Println</span>(<span class="string">"è¿è¡Œ 'go vet' å‘½ä»¤ä¼šæ£€æµ‹åˆ° processResource å‡½æ•°çš„å¤åˆ¶é—®é¢˜"</span>)
}</code></pre>

            <div class="info-box">
                <h3>ğŸ’¡ noCopy å·¥ä½œåŸç†</h3>
                <ul>
                    <li><strong>ç©ºç»“æ„ä½“</strong>ï¼šnoCopy æ˜¯ä¸€ä¸ªç©ºç»“æ„ä½“ï¼Œä¸å ç”¨å†…å­˜</li>
                    <li><strong>åµŒå…¥åˆ°ç±»å‹ä¸­</strong>ï¼šsync åŒ…ä¸­çš„ç±»å‹éƒ½åµŒå…¥äº† noCopy</li>
                    <li><strong>go vet æ£€æµ‹</strong>ï¼šgo vet å·¥å…·ä¼šæ£€æŸ¥åŒ…å« noCopy çš„ç±»å‹æ˜¯å¦è¢«å¤åˆ¶</li>
                    <li><strong>ç¼–è¯‘æ—¶è­¦å‘Š</strong>ï¼šè™½ç„¶ä¸æ˜¯ç¼–è¯‘é”™è¯¯ï¼Œä½†ä¼šå‘å‡ºè­¦å‘Š</li>
                    <li><strong>æœ€ä½³å®è·µ</strong>ï¼šå§‹ç»ˆä½¿ç”¨æŒ‡é’ˆä¼ é€’ sync åŒ…ä¸­çš„ç±»å‹</li>
                </ul>
            </div>

            <h4>è‡ªå®šä¹‰ç±»å‹çš„ noCopy ä½¿ç”¨</h4>
            <pre><code><span class="keyword">package</span> main

<span class="keyword">import</span> (
    <span class="string">"fmt"</span>
    <span class="string">"sync"</span>
)

<span class="comment">// è‡ªå®šä¹‰ç±»å‹åµŒå…¥ noCopy</span>
<span class="keyword">type</span> SafeMap <span class="keyword">struct</span> {
    mu    sync.Mutex
    data  <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">interface</span>{}
    noCopy sync.noCopy  <span class="comment">// åµŒå…¥ noCopyï¼Œé˜²æ­¢å¤åˆ¶</span>
}

<span class="function">func</span> <span class="function">NewSafeMap</span>() *SafeMap {
    <span class="keyword">return</span> &SafeMap{
        data: <span class="function">make</span>(<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">interface</span>{}),
    }
}

<span class="function">func</span> (m *SafeMap) <span class="function">Get</span>(key <span class="keyword">string</span>) (<span class="keyword">interface</span>{}, <span class="keyword">bool</span>) {
    m.mu.<span class="function">Lock</span>()
    <span class="keyword">defer</span> m.mu.<span class="function">Unlock</span>()
    val, ok := m.data[key]
    <span class="keyword">return</span> val, ok
}

<span class="function">func</span> (m *SafeMap) <span class="function">Set</span>(key <span class="keyword">string</span>, value <span class="keyword">interface</span>{}) {
    m.mu.<span class="function">Lock</span>()
    <span class="keyword">defer</span> m.mu.<span class="function">Unlock</span>()
    m.data[key] = value
}

<span class="function">func</span> <span class="function">main</span>() {
    sm := <span class="function">NewSafeMap</span>()
    
    sm.<span class="function">Set</span>(<span class="string">"name"</span>, <span class="string">"Alice"</span>)
    sm.<span class="function">Set</span>(<span class="string">"age"</span>, <span class="number">30</span>)
    
    <span class="keyword">if</span> name, ok := sm.<span class="function">Get</span>(<span class="string">"name"</span>); ok {
        fmt.<span class="function">Println</span>(<span class="string">"Name:"</span>, name)
    }
}</code></pre>

            <table>
                <caption>sync åŒ…ä¸­åŒ…å« noCopy çš„ç±»å‹</caption>
                <thead>
                    <tr>
                        <th>ç±»å‹</th>
                        <th>è¯´æ˜</th>
                        <th>æ˜¯å¦å¯å¤åˆ¶</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>Mutex</strong></td>
                        <td>äº’æ–¥é”</td>
                        <td>âŒ ä¸å¯å¤åˆ¶</td>
                    </tr>
                    <tr>
                        <td><strong>RWMutex</strong></td>
                        <td>è¯»å†™é”</td>
                        <td>âŒ ä¸å¯å¤åˆ¶</td>
                    </tr>
                    <tr>
                        <td><strong>WaitGroup</strong></td>
                        <td>ç­‰å¾…ç»„</td>
                        <td>âŒ ä¸å¯å¤åˆ¶</td>
                    </tr>
                    <tr>
                        <td><strong>Once</strong></td>
                        <td>å•æ¬¡æ‰§è¡Œ</td>
                        <td>âŒ ä¸å¯å¤åˆ¶</td>
                    </tr>
                    <tr>
                        <td><strong>Cond</strong></td>
                        <td>æ¡ä»¶å˜é‡</td>
                        <td>âŒ ä¸å¯å¤åˆ¶</td>
                    </tr>
                    <tr>
                        <td><strong>Pool</strong></td>
                        <td>å¯¹è±¡æ± </td>
                        <td>âŒ ä¸å¯å¤åˆ¶</td>
                    </tr>
                    <tr>
                        <td><strong>Map</strong></td>
                        <td>å¹¶å‘å®‰å…¨æ˜ å°„</td>
                        <td>âŒ ä¸å¯å¤åˆ¶</td>
                    </tr>
                </tbody>
            </table>

            <div class="warning-box">
                <h3>âš ï¸ ä½¿ç”¨ noCopy çš„æœ€ä½³å®è·µ</h3>
                <ul>
                    <li><strong>å§‹ç»ˆä½¿ç”¨æŒ‡é’ˆ</strong>ï¼šsync ç±»å‹çš„å˜é‡åº”è¯¥å§‹ç»ˆä½¿ç”¨æŒ‡é’ˆ</li>
                    <li><strong>å‡½æ•°å‚æ•°</strong>ï¼šå‡½æ•°å‚æ•°åº”è¯¥ä½¿ç”¨æŒ‡é’ˆç±»å‹ï¼ˆ*sync.Mutexï¼‰</li>
                    <li><strong>ç»“æ„ä½“å­—æ®µ</strong>ï¼šå¦‚æœç»“æ„ä½“åŒ…å« sync ç±»å‹ï¼Œä¹Ÿåº”è¯¥ä½¿ç”¨æŒ‡é’ˆ</li>
                    <li><strong>go vet æ£€æŸ¥</strong>ï¼šå®šæœŸè¿è¡Œ go vet æ£€æµ‹å¤åˆ¶é—®é¢˜</li>
                    <li><strong>CI/CD é›†æˆ</strong>ï¼šåœ¨ CI/CD æµç¨‹ä¸­é›†æˆ go vet æ£€æŸ¥</li>
                </ul>
            </div>

            
        </div>
    </div>
<script src="code-collapse.js"></script>

</body>
    <script src="navigation.js"></script>
</html>