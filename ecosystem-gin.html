<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gin Web æ¡†æ¶ - Go å­¦ä¹ æ•™ç¨‹</title>
    <link rel="stylesheet" href="styles.css?v=1.4">
    </head>
<body>
    <div class="container">
        <aside class="sidebar">
        <!-- å¯¼èˆªæ å°†é€šè¿‡JavaScriptåŠ¨æ€åŠ è½½ -->
    </aside>
                <div class="content">
            <a href="ecosystem.html" class="back-link">â† è¿”å›ç¤¾åŒºåº“</a>
            <h1>Gin Web æ¡†æ¶</h1>
            <p class="intro">Gin æ˜¯ Go è¯­è¨€æœ€æµè¡Œçš„ Web æ¡†æ¶ï¼Œé«˜æ€§èƒ½ã€API å‹å¥½ã€‚</p>

            <div class="feature-grid">
                <div class="feature-card">
                    <div class="icon">âš¡</div>
                    <h4>é«˜æ€§èƒ½</h4>
                    <p>æ¯” Martini å¿« 40 å€</p>
                </div>
                <div class="feature-card">
                    <div class="icon">ğŸ›£ï¸</div>
                    <h4>è·¯ç”±</h4>
                    <p>çµæ´»çš„è·¯ç”±ç³»ç»Ÿ</p>
                </div>
                <div class="feature-card">
                    <div class="icon">ğŸ”„</div>
                    <h4>ä¸­é—´ä»¶</h4>
                    <p>å¼ºå¤§çš„ä¸­é—´ä»¶æ”¯æŒ</p>
                </div>
                <div class="feature-card">
                    <div class="icon">ğŸ“</div>
                    <h4>JSON</h4>
                    <p>é«˜æ•ˆçš„ JSON å¤„ç†</p>
                </div>
            </div>

            <h2 id="gin">Gin Web æ¡†æ¶</h2>
            
            <h3>ç®€ä»‹</h3>
            <p>Gin æ˜¯ä¸€ä¸ªç”¨ Go è¯­è¨€ç¼–å†™çš„é«˜æ€§èƒ½ HTTP Web æ¡†æ¶ï¼Œå…·æœ‰ç±»ä¼¼ Martini çš„ APIï¼Œä½†æ€§èƒ½æ›´å¥½ï¼ˆé«˜è¾¾ 40 å€ï¼‰ã€‚å®ƒæä¾›äº†è·¯ç”±ã€ä¸­é—´ä»¶ã€JSON éªŒè¯ç­‰åŠŸèƒ½ï¼Œæ˜¯ Go ç¤¾åŒºæœ€æµè¡Œçš„ Web æ¡†æ¶ä¹‹ä¸€ã€‚</p>
            
            <h3>å®‰è£…</h3>
            <pre><code><span class="keyword">go</span> get -u github.com/gin-gonic/gin</code></pre>
            
            <h3>å¿«é€Ÿå¼€å§‹</h3>
            <pre><code><span class="keyword">package</span> main

<span class="keyword">import</span> (
    <span class="string">"github.com/gin-gonic/gin"</span>
    <span class="string">"net/http"</span>
)

<span class="function">func</span> <span class="function">main</span>() {
    <span class="comment">// åˆ›å»ºé»˜è®¤è·¯ç”±</span>
    r := gin.<span class="function">Default</span>()

    <span class="comment">// å®šä¹‰è·¯ç”±</span>
    r.<span class="function">GET</span>(<span class="string">"/ping"</span>, <span class="keyword">func</span>(c *gin.Context) {
        c.<span class="function">JSON</span>(http.StatusOK, gin.H{
            <span class="string">"message"</span>: <span class="string">"pong"</span>,
        })
    })

    <span class="comment">// å¯åŠ¨æœåŠ¡å™¨</span>
    r.<span class="function">Run</span>(<span class="string">":8080"</span>)
}</code></pre>
            
            <h3>è·¯ç”±</h3>
            <pre><code><span class="keyword">package</span> main

<span class="keyword">import</span> (
    <span class="string">"github.com/gin-gonic/gin"</span>
    <span class="string">"net/http"</span>
)

<span class="function">func</span> <span class="function">main</span>() {
    r := gin.<span class="function">Default</span>()

    <span class="comment">// GET è¯·æ±‚</span>
    r.<span class="function">GET</span>(<span class="string">"/users"</span>, <span class="keyword">func</span>(c *gin.Context) {
        c.<span class="function">JSON</span>(http.StatusOK, gin.H{
            <span class="string">"users"</span>: []<span class="keyword">string</span>{<span class="string">"Alice"</span>, <span class="string">"Bob"</span>},
        })
    })

    <span class="comment">// POST è¯·æ±‚</span>
    r.<span class="function">POST</span>(<span class="string">"/users"</span>, <span class="keyword">func</span>(c *gin.Context) {
        <span class="keyword">var</span> user <span class="keyword">struct</span> {
            Name  <span class="keyword">string</span> <span class="string">`json:"name"`</span>
            Email <span class="keyword">string</span> <span class="string">`json:"email"`</span>
        }
        
        <span class="keyword">if</span> err := c.<span class="function">ShouldBindJSON</span>(&user); err != <span class="keyword">nil</span> {
            c.<span class="function">JSON</span>(http.StatusBadRequest, gin.H{<span class="string">"error"</span>: err.<span class="function">Error</span>()})
            <span class="keyword">return</span>
        }
        
        c.<span class="function">JSON</span>(http.StatusCreated, gin.H{
            <span class="string">"message"</span>: <span class="string">"User created"</span>,
            <span class="string">"user"</span>:    user,
        })
    })

    <span class="comment">// è·¯å¾„å‚æ•°</span>
    r.<span class="function">GET</span>(<span class="string">"/users/:id"</span>, <span class="keyword">func</span>(c *gin.Context) {
        id := c.<span class="function">Param</span>(<span class="string">"id"</span>)
        c.<span class="function">JSON</span>(http.StatusOK, gin.H{<span class="string">"id"</span>: id})
    })

    <span class="comment">// æŸ¥è¯¢å‚æ•°</span>
    r.<span class="function">GET</span>(<span class="string">"/search"</span>, <span class="keyword">func</span>(c *gin.Context) {
        query := c.<span class="function">Query</span>(<span class="string">"q"</span>)
        page := c.<span class="function">DefaultQuery</span>(<span class="string">"page"</span>, <span class="string">"1"</span>)
        c.<span class="function">JSON</span>(http.StatusOK, gin.H{
            <span class="string">"query"</span>: query,
            <span class="string">"page"</span>:  page,
        })
    })

    r.<span class="function">Run</span>(<span class="string">":8080"</span>)
}</code></pre>
            
            <h3>ä¸­é—´ä»¶</h3>
            <pre><code><span class="keyword">package</span> main

<span class="keyword">import</span> (
    <span class="string">"fmt"</span>
    <span class="string">"github.com/gin-gonic/gin"</span>
    <span class="string">"net/http"</span>
    <span class="string">"time"</span>
)

<span class="comment">// è‡ªå®šä¹‰ä¸­é—´ä»¶</span>
<span class="function">func</span> <span class="function">Logger</span>() gin.HandlerFunc {
    <span class="keyword">return</span> <span class="keyword">func</span>(c *gin.Context) {
        start := time.<span class="function">Now</span>()
        
        c.<span class="function">Next</span>()
        
        latency := time.<span class="function">Since</span>(start)
        fmt.<span class="function">Printf</span>(<span class="string">"%s %s %v\n"</span>, c.<span class="function">Request</span>.Method, c.<span class="function">Request</span>.URL.Path, latency)
    }
}

<span class="comment">// è®¤è¯ä¸­é—´ä»¶</span>
<span class="function">func</span> <span class="function">AuthMiddleware</span>() gin.HandlerFunc {
    <span class="keyword">return</span> <span class="keyword">func</span>(c *gin.Context) {
        token := c.<span class="function">GetHeader</span>(<span class="string">"Authorization"</span>)
        
        <span class="keyword">if</span> token == <span class="string">""</span> {
            c.<span class="function">JSON</span>(http.StatusUnauthorized, gin.H{<span class="string">"error"</span>: <span class="string">"Unauthorized"</span>})
            c.<span class="function">Abort</span>()
            <span class="keyword">return</span>
        }
        
        c.<span class="function">Set</span>(<span class="string">"user_id"</span>, <span class="string">"123"</span>)
        c.<span class="function">Next</span>()
    }
}

<span class="function">func</span> <span class="function">main</span>() {
    r := gin.<span class="function">Default</span>()
    
    <span class="comment">// å…¨å±€ä¸­é—´ä»¶</span>
    r.<span class="function">Use</span>(<span class="function">Logger</span>())
    
    <span class="comment">// è·¯ç”±ç»„</span>
    api := r.<span class="function">Group</span>(<span class="string">"/api"</span>)
    api.<span class="function">Use</span>(<span class="function">AuthMiddleware</span>())
    
    api.<span class="function">GET</span>(<span class="string">"/profile"</span>, <span class="keyword">func</span>(c *gin.Context) {
        userID := c.<span class="function">GetString</span>(<span class="string">"user_id"</span>)
        c.<span class="function">JSON</span>(http.StatusOK, gin.H{<span class="string">"user_id"</span>: userID})
    })
    
    r.<span class="function">Run</span>(<span class="string">":8080"</span>)
}</code></pre>
            
            <h3>è·¯ç”±ç»„</h3>
            <pre><code><span class="keyword">package</span> main

<span class="keyword">import</span> (
    <span class="string">"github.com/gin-gonic/gin"</span>
    <span class="string">"net/http"</span>
)

<span class="function">func</span> <span class="function">main</span>() {
    r := gin.<span class="function">Default</span>()
    
    <span class="comment">// v1 è·¯ç”±ç»„</span>
    v1 := r.<span class="function">Group</span>(<span class="string">"/v1"</span>)
    {
        v1.<span class="function">GET</span>(<span class="string">"/users"</span>, <span class="keyword">func</span>(c *gin.Context) {
            c.<span class="function">String</span>(http.StatusOK, <span class="string">"v1 users"</span>)
        })
        v1.<span class="function">GET</span>(<span class="string">"/posts"</span>, <span class="keyword">func</span>(c *gin.Context) {
            c.<span class="function">String</span>(http.StatusOK, <span class="string">"v1 posts"</span>)
        })
    }
    
    <span class="comment">// v2 è·¯ç”±ç»„</span>
    v2 := r.<span class="function">Group</span>(<span class="string">"/v2"</span>)
    {
        v2.<span class="function">GET</span>(<span class="string">"/users"</span>, <span class="keyword">func</span>(c *gin.Context) {
            c.<span class="function">String</span>(http.StatusOK, <span class="string">"v2 users"</span>)
        })
        v2.<span class="function">GET</span>(<span class="string">"/posts"</span>, <span class="keyword">func</span>(c *gin.Context) {
            c.<span class="function">String</span>(http.StatusOK, <span class="string">"v2 posts"</span>)
        })
    }
    
    r.<span class="function">Run</span>(<span class="string">":8080"</span>)
}</code></pre>
            
            <h3>é”™è¯¯å¤„ç†</h3>
            <pre><code><span class="keyword">package</span> main

<span class="keyword">import</span> (
    <span class="string">"github.com/gin-gonic/gin"</span>
    <span class="string">"net/http"</span>
)

<span class="function">func</span> <span class="function">main</span>() {
    r := gin.<span class="function">Default</span>()
    
    <span class="comment">// è‡ªå®šä¹‰é”™è¯¯å¤„ç†</span>
    r.<span class="function">NoRoute</span>(<span class="keyword">func</span>(c *gin.Context) {
        c.<span class="function">JSON</span>(http.StatusNotFound, gin.H{
            <span class="string">"error"</span>: <span class="string">"Route not found"</span>,
        })
    })
    
    r.<span class="function">NoMethod</span>(<span class="keyword">func</span>(c *gin.Context) {
        c.<span class="function">JSON</span>(http.StatusMethodNotAllowed, gin.H{
            <span class="string">"error"</span>: <span class="string">"Method not allowed"</span>,
        })
    })
    
    <span class="comment">// Panic æ¢å¤</span>
    r.<span class="function">Use</span>(gin.<span class="function">Recovery</span>())
    
    r.<span class="function">GET</span>(<span class="string">"/panic"</span>, <span class="keyword">func</span>(c *gin.Context) {
        <span class="function">panic</span>(<span class="string">"Something went wrong"</span>)
    })
    
    r.<span class="function">Run</span>(<span class="string">":8080"</span>)
}</code></pre>
            
            
        </div>
    </div>
<script src="code-collapse.js"></script>

</body>
    <script src="navigation.js"></script>
</html>